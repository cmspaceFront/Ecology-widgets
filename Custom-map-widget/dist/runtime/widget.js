System.register(["jimu-core","jimu-core/react","jimu-arcgis","jimu-core/react-dom"],(function(e,t){var a={},o={},r={},n={};return{setters:[function(e){a.jsx=e.jsx},function(e){o.default=e.default,o.memo=e.memo,o.useCallback=e.useCallback,o.useEffect=e.useEffect,o.useMemo=e.useMemo,o.useRef=e.useRef,o.useState=e.useState},function(e){r.loadArcGISJSAPIModules=e.loadArcGISJSAPIModules},function(e){n.createPortal=e.createPortal}],execute:function(){e((()=>{var e,t,i,l,s={9895:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var o=a(8081),r=a.n(o),n=a(3645),i=a.n(n)()(r());i.push([e.id,'.custom-dropdown{position:relative;width:100%}.custom-dropdown__trigger{width:100%;padding:14px 16px;padding-right:44px;border:none;border-radius:10px;background:rgba(53,69,98,.4);color:#e2e8f0;outline:none;font-size:14px;line-height:1.4;height:44px;font-family:"Geologica",Inter,-apple-system,sans-serif;cursor:pointer;display:flex;align-items:center;justify-content:space-between;transition:background .2s,box-shadow .2s;text-align:left}.custom-dropdown__trigger:hover{background:rgba(53,69,98,.6)}.custom-dropdown__trigger:focus{background:rgba(53,69,98,.6);box-shadow:0 0 0 2px rgba(59,130,246,.3)}.custom-dropdown--open .custom-dropdown__trigger{background:rgba(53,69,98,.6);box-shadow:0 0 0 2px rgba(59,130,246,.3)}.custom-dropdown__value{flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.custom-dropdown__value--placeholder{color:rgba(148,163,184,.6)}.custom-dropdown__chevron{position:absolute;right:16px;top:50%;transform:translateY(-50%);pointer-events:none;color:rgba(148,163,184,.7);transition:transform .2s ease,color .2s;flex-shrink:0}.custom-dropdown__chevron--open{transform:translateY(-50%) rotate(180deg)}.custom-dropdown--open .custom-dropdown__chevron{color:rgba(148,163,184,.9)}.custom-dropdown__options-wrapper{position:absolute;top:calc(100% + 4px);left:0;right:0;z-index:1000;background:rgba(30,41,59,.98);backdrop-filter:blur(12px);border-radius:10px;border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 24px rgba(0,0,0,.4);overflow:hidden;animation:dropdownFadeIn .2s ease-out}@keyframes dropdownFadeIn{from{opacity:0;transform:translateY(-8px)}to{opacity:1;transform:translateY(0)}}.custom-dropdown__options{list-style:none;margin:0;padding:4px;max-height:200px;overflow-y:auto;scrollbar-width:thin;scrollbar-color:rgba(148,163,184,.3) rgba(0,0,0,0)}.custom-dropdown__options::-webkit-scrollbar{width:6px}.custom-dropdown__options::-webkit-scrollbar-track{background:rgba(0,0,0,0)}.custom-dropdown__options::-webkit-scrollbar-thumb{background:var(--theme-primary-rgba, rgba(78, 204, 242, 0.6));border-radius:3px}.custom-dropdown__options::-webkit-scrollbar-thumb:hover{background:var(--theme-primary-rgba-hover, rgba(78, 204, 242, 0.8))}.custom-dropdown__option{padding:12px 16px;color:#e2e8f0;cursor:pointer;display:flex;align-items:center;justify-content:space-between;gap:8px;border-radius:6px;transition:background .15s,color .15s;font-size:14px;font-family:"Geologica",Inter,-apple-system,sans-serif}.custom-dropdown__option:hover,.custom-dropdown__option--highlighted{background:rgba(59,130,246,.15);color:#fff}.custom-dropdown__option--selected{background:rgba(59,130,246,.2);color:#60a5fa;font-weight:500}.custom-dropdown__option--selected:hover,.custom-dropdown__option--selected.custom-dropdown__option--highlighted{background:rgba(59,130,246,.3);color:#93c5fd}.custom-dropdown__check{color:#60a5fa;flex-shrink:0;width:16px;height:16px}.custom-dropdown__option--selected .custom-dropdown__check{animation:checkFadeIn .2s ease-out}@keyframes checkFadeIn{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:scale(1)}}.custom-dropdown__option{animation:optionFadeIn .15s ease-out backwards}.custom-dropdown__option:nth-child(1){animation-delay:.01s}.custom-dropdown__option:nth-child(2){animation-delay:.02s}.custom-dropdown__option:nth-child(3){animation-delay:.03s}.custom-dropdown__option:nth-child(4){animation-delay:.04s}.custom-dropdown__option:nth-child(5){animation-delay:.05s}.custom-dropdown__option:nth-child(6){animation-delay:.06s}@keyframes optionFadeIn{from{opacity:0;transform:translateX(-4px)}to{opacity:1;transform:translateX(0)}}',""]);const l=i},3325:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var o=a(8081),r=a.n(o),n=a(3645),i=a.n(n)()(r());i.push([e.id,'.custom-modal-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);backdrop-filter:blur(8px);z-index:2147483647 !important;isolation:isolate}.custom-modal{width:628px;max-width:90vw;padding:14px 18px 18px;border-radius:20px;border:1px solid rgba(255,255,255,.08);background:rgba(16,28,50,.6);color:#e2e8f0;box-shadow:0 25px 50px -12px rgba(0,0,0,.5);font-family:"Geologica",Inter,-apple-system,sans-serif;display:flex;flex-direction:column;z-index:2147483647 !important;position:relative}.custom-modal__header{display:flex;justify-content:center;align-items:center;position:relative;margin-bottom:14px}.custom-modal__title{font-size:18px;font-weight:600;color:#fff;text-align:center}.custom-modal__close{position:absolute;right:0;top:50%;transform:translateY(-50%);background:rgba(0,0,0,0);border:none;color:#64748b;font-size:34px;font-weight:100;cursor:pointer;line-height:1;padding:4px;transition:color .2s}.custom-modal__close:hover{color:#94a3b8}.custom-modal__body{display:flex;flex-direction:column;gap:6px}.custom-modal__row{display:grid;gap:8px}.custom-modal__row--full{grid-template-columns:1fr}.custom-modal__row--half{grid-template-columns:1fr 1fr}.custom-modal__row--izoh{display:flex;gap:8px}.custom-modal__row--izoh>.custom-modal__field:first-child{flex:2}.custom-modal__row--izoh>.custom-modal__field:last-child{flex:1}.custom-modal__field{display:flex;flex-direction:column;gap:8px}.custom-modal__label{font-size:13px;color:rgba(148,163,184,.9);font-weight:400}.custom-modal__input,.custom-modal__select{padding:14px 16px;border:none;border-radius:10px;background:rgba(53,69,98,.4);color:#e2e8f0;outline:none;font-size:14px;line-height:1.4;height:44px;font-family:inherit;transition:background .2s,box-shadow .2s}.custom-modal__input::placeholder{color:rgba(148,163,184,.6)}.custom-modal__input:focus,.custom-modal__select:focus{background:#1e293b;box-shadow:0 0 0 2px rgba(59,130,246,.3)}.custom-modal__input--readonly,.custom-modal__input:disabled{background:rgba(30,41,59,.6);color:rgba(226,232,240,.7);cursor:not-allowed;opacity:.8}.custom-modal__input--readonly:focus,.custom-modal__input:disabled:focus{background:rgba(30,41,59,.6);box-shadow:none}.custom-modal__select-wrapper{position:relative}.custom-modal__select{width:100%;cursor:pointer;appearance:none;padding-right:44px}.custom-modal__select-arrow{position:absolute;right:16px;top:50%;transform:translateY(-50%);pointer-events:none;color:rgba(148,163,184,.7);font-size:10px}.custom-modal__upload-zone{margin-top:8px;border:1px dashed rgba(129,136,148,.4);border-radius:12px;padding:16px 12px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;cursor:pointer;transition:border-color .2s,background .2s;background:rgba(53,69,98,.4)}.custom-modal__upload-zone:hover{border-color:rgba(148,163,184,.5);background:rgba(53,69,98,.6)}.custom-modal__upload-zone--dragging{border-color:rgba(59,130,246,.6);background:rgba(53,69,98,.7);border-style:solid}.custom-modal__upload-zone--has-file{padding:12px 16px;align-items:flex-start}.custom-modal__upload-icon{color:rgba(148,163,184,.5);font-size:28px;margin-bottom:8px}.custom-modal__upload-text{font-size:14px;color:rgba(148,163,184,.8)}.custom-modal__upload-text span{color:#3b82f6;text-decoration:none;cursor:pointer}.custom-modal__upload-text span:hover{text-decoration:underline}.custom-modal__upload-hint{font-size:12px;color:rgba(148,163,184,.5);margin-top:4px}.custom-modal__file-input{display:none}.custom-modal__file-info{display:flex;align-items:center;gap:12px;width:100%;padding:4px 0}.custom-modal__file-icon{color:rgba(59,130,246,.8);flex-shrink:0}.custom-modal__file-details{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}.custom-modal__file-name{font-size:14px;color:#e2e8f0;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.custom-modal__file-size{font-size:12px;color:rgba(148,163,184,.7)}.custom-modal__file-remove{background:rgba(0,0,0,0);border:none;color:rgba(148,163,184,.7);cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:color .2s,background .2s;flex-shrink:0}.custom-modal__file-remove:hover{color:#ef4444;background:rgba(239,68,68,.1)}.custom-modal__upload-error{margin-top:8px;padding:8px 12px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);border-radius:6px;color:#f87171;font-size:12px;display:flex;align-items:center;gap:8px}.custom-modal__upload-error::before{content:"âš ";font-size:14px}.custom-modal__submit-success{margin-top:12px;padding:12px;border-radius:8px;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.3);color:#86efac;font-size:13px;line-height:1.4;display:flex;align-items:center;gap:8px;animation:slideIn .3s ease-out}.custom-modal__submit-success svg{flex-shrink:0;stroke:currentColor}.custom-modal__submit-error{margin-top:12px;padding:12px;border-radius:8px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);color:#fca5a5;font-size:13px;line-height:1.4;animation:slideIn .3s ease-out}@keyframes slideIn{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.custom-modal__footer{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:24px}.custom-modal__cancel,.custom-modal__submit{padding:12px 18px;border-radius:10px;border:none;cursor:pointer;color:#fff;font-size:15px;font-weight:500;font-family:inherit;transition:opacity .2s,transform .1s,filter .2s}.custom-modal__cancel{background:linear-gradient(135deg, #C12862 0%, #a0174b 100%)}.custom-modal__cancel:hover{filter:brightness(1.1)}.custom-modal__submit{background:linear-gradient(135deg, #1487C5 0%, #011AFE 100%)}.custom-modal__submit:hover{filter:brightness(1.1)}.custom-modal__cancel:active,.custom-modal__submit:active{transform:scale(0.98)}.custom-modal__select option{background:#1e293b;color:#e2e8f0;padding:12px}',""]);const l=i},5632:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var o=a(8081),r=a.n(o),n=a(3645),i=a.n(n)()(r());i.push([e.id,'.map-popup-overlay{position:absolute;inset:0;z-index:2147483646;background:rgba(0,0,0,0)}.map-popup{position:absolute;width:420px;max-width:90vw;max-height:350px;padding:10px 12px;border-radius:20px;border:1px solid rgba(255,255,255,.05);background:rgba(16,28,50,.6);backdrop-filter:blur(12px);-webkit-backdrop-filter:blur(12px);color:#e2e8f0;box-shadow:0 8px 32px rgba(0,0,0,.3);font-family:"Geologica",Inter,-apple-system,sans-serif;display:flex;flex-direction:column;z-index:2147483647 !important;animation:popupFadeIn .15s cubic-bezier(0.16, 1, 0.3, 1);overflow:hidden;transition:left .3s ease,right .3s ease,top .3s ease,width .3s ease,height .3s ease,border-radius .3s ease;isolation:isolate}.map-popup--sidebar{right:2px !important;left:auto !important;top:2px !important;width:420px !important;height:calc(100% - 4px) !important;max-height:none !important;border-radius:20px;border:1px solid rgba(255,255,255,.05)}@keyframes popupFadeIn{from{opacity:0;transform:scale(0.96) translateY(-5px)}to{opacity:1;transform:scale(1) translateY(0)}}.map-popup__header{display:flex;justify-content:center;align-items:center;position:relative;margin-bottom:16px;flex-shrink:0}.map-popup__title{font-size:18px;font-weight:500;color:#fff;text-align:center}.map-popup__header-buttons{position:absolute;right:0;top:50%;transform:translateY(-50%);display:flex;align-items:center;gap:8px}.map-popup__toggle-sidebar,.map-popup__close{background:rgba(0,0,0,0);border:none;color:rgba(255,255,255,.5);cursor:pointer;line-height:1;padding:4px;transition:opacity .2s;display:flex;align-items:center;justify-content:center}.map-popup__toggle-sidebar:hover,.map-popup__close:hover{opacity:.8}.map-popup__toggle-sidebar svg,.map-popup__close svg{display:block}.map-popup__body{display:flex;flex-direction:column;gap:0;overflow-y:auto;overflow-x:hidden;flex:1;padding-right:12px}.map-popup__body::-webkit-scrollbar{width:4px}.map-popup__body::-webkit-scrollbar-track{background:rgba(0,0,0,.3);border-radius:2px}.map-popup__body::-webkit-scrollbar-thumb{background:var(--theme-primary-rgba, rgba(78, 204, 242, 0.6));border-radius:2px}.map-popup__body::-webkit-scrollbar-thumb:hover{background:var(--theme-primary-rgba-hover, rgba(78, 204, 242, 0.8))}.map-popup__body::-webkit-scrollbar-button{display:none}.map-popup__body{scrollbar-width:thin;scrollbar-color:var(--theme-primary-rgba, rgba(78, 204, 242, 0.6)) rgba(0,0,0,.3)}.map-popup__section{display:flex;flex-direction:column;gap:0}.map-popup__section-title{font-size:13px;font-weight:600;color:rgba(148,163,184,.8);margin-bottom:8px;margin-top:12px}.map-popup__field{display:flex;flex-direction:row;justify-content:space-between;align-items:flex-start;gap:24px;padding:14px 0;border-bottom:1px solid rgba(255,255,255,.08)}.map-popup__field:last-child{border-bottom:none}.map-popup__label{font-size:15px;color:rgba(255,255,255,.6);font-weight:400;flex-shrink:0}.map-popup__value{font-size:15px;color:#fff;font-weight:400;text-align:right;flex:1;line-height:1.5;word-wrap:break-word;overflow-wrap:break-word}.map-popup__files{display:flex;flex-direction:column;gap:8px;margin-top:8px}.map-popup__file-item{display:flex;align-items:center;gap:12px;padding:10px 12px;background:rgba(53,69,98,.3);border-radius:8px;transition:background .2s;border:1px solid rgba(255,255,255,.05)}.map-popup__file-item:hover{background:rgba(53,69,98,.5)}.map-popup__file-item--clickable{cursor:pointer}.map-popup__file-item--clickable:hover{background:rgba(59,130,246,.2);border-color:rgba(59,130,246,.3)}.map-popup__file-icon{color:rgba(59,130,246,.7);flex-shrink:0}.map-popup__file-details{flex:1;min-width:0;display:flex;flex-direction:column;gap:2px}.map-popup__file-name{font-size:13px;color:#e2e8f0;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.map-popup__file-size{font-size:11px;color:rgba(148,163,184,.6)}.map-popup__edit-button{padding:10px 20px;border-radius:8px;border:none;cursor:pointer;color:#fff;font-size:14px;font-weight:500;font-family:"Geologica",Inter,-apple-system,sans-serif;background:linear-gradient(90deg, #1487C5 0%, #011AFE 100%);transition:filter .2s,transform .1s,opacity .2s;display:flex;align-items:center;gap:8px;width:100%;justify-content:center;margin-top:12px}.map-popup__edit-icon{flex-shrink:0;width:20px;height:20px}.map-popup__edit-button:hover:not(:disabled){filter:brightness(1.1)}.map-popup__edit-button:active:not(:disabled){transform:scale(0.98)}.map-popup__edit-button--disabled,.map-popup__edit-button:disabled{opacity:.5;cursor:not-allowed;background:rgba(148,163,184,.3);background-image:none}.map-popup__edit-button--disabled:hover,.map-popup__edit-button:disabled:hover{filter:none;transform:none}.map-popup__photos-section{margin-top:12px}.map-popup__photos{display:flex;flex-direction:column;gap:12px}.map-popup__photo-item{display:flex;flex-direction:column;gap:6px}.map-popup__photo-image{width:100%;height:auto;border-radius:8px;object-fit:cover;border:1px solid rgba(255,255,255,.08)}.map-popup__photo-timestamp{font-size:11px;color:rgba(148,163,184,.7);text-align:left}.map-popup__files-list{display:flex;flex-direction:column;gap:8px;margin-top:8px}.map-popup__section-title{font-size:14px;font-weight:600;color:#fff;margin-bottom:8px}.map-popup__file-item--clickable{cursor:pointer}.map-popup__file-item--clickable:hover{background:rgba(59,130,246,.2);border-color:rgba(59,130,246,.3)}.map-popup__file-viewer-overlay{position:fixed;inset:0;background:rgba(0,0,0,.8);backdrop-filter:blur(8px);z-index:2147483648;display:flex;align-items:center;justify-content:center;padding:20px;animation:fadeIn .2s ease}.map-container{position:relative}@keyframes fadeIn{from{opacity:0}to{opacity:1}}.map-popup__file-viewer{background:rgba(16,28,50,.95);border-radius:20px;border:1px solid rgba(255,255,255,.1);max-width:90vw;max-height:90vh;width:100%;display:flex;flex-direction:column;box-shadow:0 25px 50px -12px rgba(0,0,0,.5);animation:slideUp .3s cubic-bezier(0.16, 1, 0.3, 1)}@keyframes slideUp{from{opacity:0;transform:translateY(20px) scale(0.95)}to{opacity:1;transform:translateY(0) scale(1)}}.map-popup__file-viewer-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:1px solid rgba(255,255,255,.1)}.map-popup__file-viewer-title{font-size:16px;font-weight:600;color:#fff;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1;margin-right:16px}.map-popup__file-viewer-close{background:rgba(0,0,0,0);border:none;color:#94a3b8;font-size:32px;font-weight:100;cursor:pointer;line-height:1;padding:4px;transition:color .2s;flex-shrink:0}.map-popup__file-viewer-close:hover{color:#fff}.map-popup__file-viewer-content{padding:20px;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;max-height:calc(90vh - 100px);overflow:auto}.map-popup__file-viewer-video{width:100%;max-width:100%;max-height:calc(90vh - 100px);border-radius:12px;background:#000}.map-popup__file-viewer-image{max-width:100%;max-height:calc(90vh - 100px);border-radius:12px;object-fit:contain;box-shadow:0 8px 32px rgba(0,0,0,.3)}.map-popup__file-viewer-document{width:100%;height:calc(90vh - 150px);min-height:500px;display:flex;flex-direction:column;gap:16px}.map-popup__file-viewer-iframe{width:100%;flex:1;border:none;border-radius:12px;background:#fff;box-shadow:0 8px 32px rgba(0,0,0,.3)}.map-popup__file-download-button{padding:12px 24px;border-radius:8px;border:none;cursor:pointer;color:#fff;font-size:14px;font-weight:500;font-family:"Geologica",Inter,-apple-system,sans-serif;background:linear-gradient(90deg, #1487C5 0%, #011AFE 100%);transition:filter .2s,transform .1s;text-decoration:none;display:inline-flex;align-items:center;justify-content:center;align-self:center}.map-popup__file-download-button:hover{filter:brightness(1.1);transform:translateY(-1px)}.map-popup__file-download-button:active{transform:translateY(0)}.map-popup__loading-files{padding:16px;text-align:center;color:rgba(148,163,184,.7);font-size:13px}.map-popup{box-sizing:border-box}.map-popup__body{min-height:0;flex:1 1 auto;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}.map-popup__value{min-width:0}.map-popup{box-sizing:border-box;max-width:calc(100% - 4px);max-height:calc(100% - 4px)}.map-popup__body{min-height:0;flex:1 1 auto;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior:contain}.map-popup__value{min-width:0;word-break:break-word}.map-popup{box-sizing:border-box;max-width:calc(100% - 4px);max-height:calc(100% - 4px)}.map-popup__body{min-height:0;flex:1 1 auto;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;touch-action:pan-y}.map-popup{box-sizing:border-box;max-width:calc(100% - 4px);max-height:calc(100% - 4px)}.map-popup__body{min-height:0;flex:1 1 auto;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;touch-action:pan-y}.map-popup__value{min-width:0;word-break:break-word;overflow-wrap:anywhere}.map-popup--sidebar{max-width:calc(100% - 4px) !important;max-height:calc(100% - 4px) !important}.map-popup[data-compact-y="1"] .map-popup__body::-webkit-scrollbar{width:8px}.map-popup[data-compact-y="1"] .map-popup__body::-webkit-scrollbar-thumb{min-height:64px;background:rgba(78,204,242,.85)}.map-popup[data-compact-y="1"] .map-popup__body{padding-right:8px}.map-popup__body{min-height:0;flex:1 1 auto;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;touch-action:pan-y}.map-popup[data-compact-y="1"]{padding:8px 10px}.map-popup[data-compact-y="1"] .map-popup__header{margin-bottom:10px}.map-popup[data-compact-y="1"] .map-popup__field{padding:10px 0;gap:16px}.map-popup[data-compact-y="1"] .map-popup__label,.map-popup[data-compact-y="1"] .map-popup__value{font-size:14px}.map-popup[data-compact-y="1"] .map-popup__body::-webkit-scrollbar{width:10px}.map-popup[data-compact-y="1"] .map-popup__body::-webkit-scrollbar-thumb{min-height:72px}.map-popup[data-compact-y="1"] .map-popup__body{padding-right:10px;scrollbar-width:auto}.map-popup{box-sizing:border-box;display:flex;flex-direction:column;overflow:hidden}.map-popup__body{min-height:0;flex:1 1 auto;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;touch-action:pan-y}.map-popup[data-compact-y="1"]{padding:8px 10px}.map-popup[data-compact-y="1"] .map-popup__field{padding:10px 0;gap:16px}.map-popup[data-compact-y="1"] .map-popup__header{margin-bottom:10px}.map-popup[data-compact-y="1"] .map-popup__body::-webkit-scrollbar{width:10px}.map-popup[data-compact-y="1"] .map-popup__body::-webkit-scrollbar-thumb{min-height:72px}.map-popup{display:flex;flex-direction:column;overflow:hidden;max-width:calc(100% - 4px);max-height:calc(100% - 4px);box-sizing:border-box}.map-popup__body{min-height:0;flex:1 1 auto;overflow-y:auto;overflow-x:hidden;-webkit-overflow-scrolling:touch;overscroll-behavior:contain;touch-action:pan-y}.map-popup[data-compact-y="1"]{padding:8px 10px}.map-popup[data-compact-y="1"] .map-popup__field{padding:10px 0;gap:16px}.map-popup[data-compact-y="1"] .map-popup__body::-webkit-scrollbar{width:10px}.map-popup[data-compact-y="1"] .map-popup__body::-webkit-scrollbar-thumb{min-height:72px}',""]);const l=i},10:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var o=a(8081),r=a.n(o),n=a(3645),i=a.n(n)()(r());i.push([e.id,'#custom-toast-portal{position:fixed;top:20px;right:20px;z-index:2147483648;pointer-events:none}.custom-toast{display:flex;align-items:center;gap:12px;padding:14px 18px;border-radius:12px;background:rgba(16,28,50,.95);backdrop-filter:blur(12px);border:1px solid rgba(255,255,255,.1);box-shadow:0 10px 25px -5px rgba(0,0,0,.5);min-width:300px;max-width:400px;pointer-events:auto;transform:translateX(calc(100% + 40px));opacity:0;transition:transform .3s cubic-bezier(0.4, 0, 0.2, 1),opacity .3s cubic-bezier(0.4, 0, 0.2, 1);font-family:"Geologica",Inter,-apple-system,sans-serif}.custom-toast--visible{transform:translateX(0);opacity:1}.custom-toast--success{border-left:3px solid #22c55e}.custom-toast--success .custom-toast__icon{color:#22c55e}.custom-toast--error{border-left:3px solid #ef4444}.custom-toast--error .custom-toast__icon{color:#ef4444}.custom-toast--info{border-left:3px solid #3b82f6}.custom-toast--info .custom-toast__icon{color:#3b82f6}.custom-toast__icon{flex-shrink:0;display:flex;align-items:center;justify-content:center;width:24px;height:24px}.custom-toast__icon svg{width:100%;height:100%}.custom-toast__message{flex:1;font-size:14px;font-weight:500;color:#e2e8f0;line-height:1.4}.custom-toast__close{flex-shrink:0;background:rgba(0,0,0,0);border:none;color:rgba(148,163,184,.7);cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:color .2s,background .2s;width:24px;height:24px}.custom-toast__close:hover{color:#e2e8f0;background:rgba(255,255,255,.1)}.custom-toast__close svg{width:100%;height:100%}',""]);const l=i},2265:(e,t,a)=>{"use strict";a.d(t,{Z:()=>l});var o=a(8081),r=a.n(o),n=a(3645),i=a.n(n)()(r());i.push([e.id,"@import url(https://fonts.googleapis.com/css2?family=Geologica:wght@100;200;300;400;500;600;700;800;900&display=swap);"]),i.push([e.id,'.custom-map-widget{display:flex;flex-direction:column;width:100%;height:100%;background:rgba(16,28,50,.3);border:1px solid rgba(255,255,255,.05);border-radius:20px;backdrop-filter:blur(10px);-webkit-backdrop-filter:blur(10px);overflow:hidden;font-family:"Geologica",-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",sans-serif;box-sizing:border-box;box-shadow:0 4px 15px rgba(0,0,0,.1);transition:transform .4s cubic-bezier(0.4, 0, 0.2, 1),box-shadow .4s cubic-bezier(0.4, 0, 0.2, 1),border-color .4s ease;animation:borderGlow 3s ease-in-out infinite}.geo-info{width:100%;height:100%;display:flex;flex-direction:column;position:relative;z-index:1}.geo-info .map-container{width:100%;height:100%;min-height:500px;border-radius:16px;border:.5px solid rgba(255,255,255,.2);overflow:hidden;flex:1;position:relative;z-index:1}.zoom-controls{position:absolute;left:16px;top:50%;transform:translateY(-50%);display:flex;flex-direction:column;gap:8px;z-index:10}.basemap-gallery-container{position:absolute;left:16px;top:16px;z-index:2147483648}.basemap-toggle-btn{position:relative;width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg, rgba(30, 37, 55, 0.95) 0%, rgba(20, 25, 40, 0.95) 100%);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.15);display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;transition:all .3s cubic-bezier(0.4, 0, 0.2, 1);padding:0;box-shadow:0 4px 12px rgba(0,0,0,.15),0 0 0 0 rgba(78,204,242,0);overflow:hidden}.basemap-toggle-btn::before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:radial-gradient(circle, rgba(78, 204, 242, 0.3) 0%, transparent 70%);transform:translate(-50%, -50%);transition:width .4s ease,height .4s ease}.basemap-toggle-btn:hover{background:linear-gradient(135deg, rgba(40, 47, 65, 0.98) 0%, rgba(30, 35, 50, 0.98) 100%);transform:scale(1.08);border-color:rgba(78,204,242,.4);box-shadow:0 6px 20px rgba(0,0,0,.25),0 0 20px rgba(78,204,242,.2)}.basemap-toggle-btn:hover::before{width:100px;height:100px}.basemap-toggle-btn:active{transform:scale(0.96);transition:transform .1s ease}.basemap-toggle-btn--active{background:linear-gradient(135deg, rgba(78, 204, 242, 0.25) 0%, rgba(30, 37, 55, 0.95) 100%);border-color:rgba(78,204,242,.5);box-shadow:0 6px 20px rgba(0,0,0,.25),0 0 25px rgba(78,204,242,.3)}.basemap-toggle-btn__icon{position:relative;z-index:2;transition:transform .3s ease}.basemap-toggle-btn:hover .basemap-toggle-btn__icon{transform:rotate(5deg) scale(1.1)}.basemap-toggle-btn--active .basemap-toggle-btn__icon{transform:rotate(0deg)}.basemap-toggle-btn svg{width:20px;height:20px;filter:drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2))}.basemap-gallery{position:absolute;left:52px;top:0;width:300px;max-height:450px;background:linear-gradient(135deg, rgba(20, 25, 40, 0.98) 0%, rgba(30, 37, 55, 0.98) 100%);backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px);border-radius:16px;border:1px solid rgba(255,255,255,.15);box-shadow:0 12px 40px rgba(0,0,0,.4),0 0 0 1px rgba(255,255,255,.05) inset,0 0 60px rgba(78,204,242,.1);overflow:hidden;z-index:2147483649;animation:slideRight .4s cubic-bezier(0.4, 0, 0.2, 1)}@keyframes slideDown{from{opacity:0;transform:translateY(-15px) scale(0.95)}to{opacity:1;transform:translateY(0) scale(1)}}@keyframes slideRight{from{opacity:0;transform:translateX(-15px) scale(0.95)}to{opacity:1;transform:translateX(0) scale(1)}}.basemap-gallery__header{position:relative;padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.1);background:linear-gradient(135deg, rgba(78, 204, 242, 0.08) 0%, transparent 100%);overflow:hidden}.basemap-gallery__header-content{position:relative;z-index:2;display:flex;align-items:center;gap:10px}.basemap-gallery__header-icon{display:flex;align-items:center;justify-content:center;width:24px;height:24px;color:var(--theme-primary-rgba, rgba(78, 204, 242, 0.9));filter:drop-shadow(0 0 8px rgba(78, 204, 242, 0.4))}.basemap-gallery__header-gradient{position:absolute;top:0;left:0;right:0;height:100%;background:linear-gradient(90deg, transparent 0%, rgba(78, 204, 242, 0.1) 50%, transparent 100%);animation:shimmer 3s ease-in-out infinite}@keyframes shimmer{0%,100%{transform:translateX(-100%)}50%{transform:translateX(100%)}}.basemap-gallery__title{font-size:16px;font-weight:600;color:#fff;margin:0;font-family:"Geologica",sans-serif;line-height:1.2;text-shadow:0 2px 8px rgba(0,0,0,.3);letter-spacing:.3px}.basemap-gallery__content{padding:12px;max-height:340px;overflow-y:auto}.basemap-gallery__content::-webkit-scrollbar{width:6px}.basemap-gallery__content::-webkit-scrollbar-track{background:rgba(255,255,255,.05);border-radius:3px}.basemap-gallery__content::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);border-radius:3px}.basemap-gallery__content::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.3)}.basemap-gallery__section{margin-bottom:12px}.basemap-gallery__section:last-child{margin-bottom:0}.basemap-gallery__section-title{font-size:12px;font-weight:600;color:rgba(255,255,255,.7);margin-bottom:10px;padding:0 10px;font-family:"Geologica",sans-serif;text-transform:uppercase;letter-spacing:1px;position:relative;display:inline-block}.basemap-gallery__section-title::after{content:"";position:absolute;bottom:-4px;left:10px;right:10px;height:1px;background:linear-gradient(90deg, transparent 0%, rgba(78, 204, 242, 0.3) 50%, transparent 100%)}.basemap-option{position:relative;display:flex;align-items:center;justify-content:space-between;padding:12px 14px;margin-bottom:6px;border-radius:12px;cursor:pointer;transition:all .3s cubic-bezier(0.4, 0, 0.2, 1);color:#fff;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);min-height:56px;overflow:hidden}.basemap-option::before{content:"";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.1) 50%, transparent 100%);transition:left .5s ease}.basemap-option:hover{background:rgba(255,255,255,.08);border-color:rgba(255,255,255,.15);transform:translateX(4px);box-shadow:0 4px 12px rgba(0,0,0,.2)}.basemap-option:hover::before{left:100%}.basemap-option--selected{background:linear-gradient(135deg, var(--theme-primary-rgba, rgba(78, 204, 242, 0.25)) 0%, rgba(78, 204, 242, 0.15) 100%);border:1.5px solid var(--theme-primary-rgba-hover, rgba(78, 204, 242, 0.6));box-shadow:0 4px 16px rgba(78,204,242,.2),0 0 0 1px rgba(78,204,242,.1) inset}.basemap-option--selected:hover{background:linear-gradient(135deg, var(--theme-primary-rgba-hover, rgba(78, 204, 242, 0.35)) 0%, rgba(78, 204, 242, 0.2) 100%);border-color:var(--theme-primary-rgba-hover, rgba(78, 204, 242, 0.8));box-shadow:0 6px 20px rgba(78,204,242,.3),0 0 0 1px rgba(78,204,242,.15) inset;transform:translateX(4px) scale(1.02)}.basemap-option__content{display:flex;align-items:center;gap:12px;flex:1}.basemap-option__title{font-size:14px;font-weight:500;color:#fff;font-family:"Geologica",sans-serif;line-height:1.4;letter-spacing:.2px}.basemap-option--selected .basemap-option__title{color:rgba(255,255,255,.95);font-weight:600}.basemap-option__thumbnail{position:relative;width:52px;height:52px;border-radius:10px;background:linear-gradient(135deg, rgba(255, 255, 255, 0.12) 0%, rgba(255, 255, 255, 0.06) 100%);border:1.5px solid rgba(255,255,255,.2);overflow:hidden;flex-shrink:0;box-shadow:0 2px 8px rgba(0,0,0,.2),0 0 0 1px rgba(255,255,255,.05) inset;transition:all .3s ease;display:flex;align-items:center;justify-content:center}.basemap-option:hover .basemap-option__thumbnail{border-color:rgba(255,255,255,.3);box-shadow:0 4px 12px rgba(0,0,0,.3),0 0 0 1px rgba(255,255,255,.1) inset}.basemap-option--selected .basemap-option__thumbnail{border-color:var(--theme-primary-rgba-hover, rgba(78, 204, 242, 0.6));box-shadow:0 4px 12px rgba(78,204,242,.3),0 0 0 1px rgba(78,204,242,.2) inset}.basemap-option__thumbnail-img{width:100%;height:100%;object-fit:cover;border-radius:8px;display:block}.basemap-option__thumbnail-inner{width:100%;height:100%;background:linear-gradient(135deg, rgba(78, 204, 242, 0.1) 0%, rgba(145, 223, 246, 0.05) 100%);border-radius:8px;position:absolute;top:0;left:0}.basemap-option__check{display:flex;align-items:center;justify-content:center;width:24px;height:24px;border-radius:50%;background:linear-gradient(135deg, var(--theme-primary-rgba-hover, rgba(78, 204, 242, 0.9)) 0%, rgba(78, 204, 242, 0.7) 100%);color:#fff;box-shadow:0 2px 8px rgba(78,204,242,.4),0 0 0 2px rgba(78,204,242,.2);animation:checkPop .3s cubic-bezier(0.4, 0, 0.2, 1)}@keyframes checkPop{0%{transform:scale(0);opacity:0}50%{transform:scale(1.2)}100%{transform:scale(1);opacity:1}}.basemap-option__check svg{width:12px;height:12px;filter:drop-shadow(0 1px 2px rgba(0, 0, 0, 0.3))}.basemap-gallery__footer{padding:14px 18px;border-top:1px solid rgba(255,255,255,.1);margin-top:8px;background:linear-gradient(180deg, transparent 0%, rgba(78, 204, 242, 0.03) 100%)}.basemap-checkbox{display:flex;align-items:center;gap:10px;cursor:pointer;color:rgba(255,255,255,.9);font-size:13px;font-family:"Geologica",sans-serif;padding:4px 0;transition:color .2s ease}.basemap-checkbox:hover{color:#fff}.basemap-checkbox input[type=checkbox]{width:18px;height:18px;cursor:pointer;accent-color:var(--theme-primary-rgba, rgba(78, 204, 242, 0.8));border-radius:4px;transition:transform .2s ease}.basemap-checkbox:hover input[type=checkbox]{transform:scale(1.1)}.basemap-checkbox span{user-select:none;font-weight:500;letter-spacing:.2px}.zoom-btn{width:40px;height:40px;border-radius:50%;background-color:rgba(30,37,55,.8);backdrop-filter:blur(10px);border:.5px solid rgba(255,255,255,.2);display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;transition:all .2s;padding:0}.zoom-btn:hover{background-color:rgba(30,37,55,.9);transform:scale(1.05)}.zoom-btn:active{transform:scale(0.95)}.zoom-btn svg{width:20px;height:20px}.error{color:#f33;padding:20px}.map-loader{position:absolute;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;background:linear-gradient(135deg, rgba(6, 10, 24, 0.98) 0%, rgba(16, 28, 50, 0.98) 50%, rgba(6, 10, 24, 0.98) 100%);backdrop-filter:blur(30px);-webkit-backdrop-filter:blur(30px);z-index:100;border-radius:16px;overflow:hidden}.map-loader__background{position:absolute;top:0;left:0;right:0;bottom:0;opacity:.4}.map-loader__grid{position:absolute;top:0;left:0;right:0;bottom:0;background-image:linear-gradient(var(--loader-primary-rgba-01, rgba(78, 204, 242, 0.1)) 1px, transparent 1px),linear-gradient(90deg, var(--loader-primary-rgba-01, rgba(78, 204, 242, 0.1)) 1px, transparent 1px);background-size:50px 50px;animation:gridMove 20s linear infinite}@keyframes gridMove{0%{transform:translate(0, 0)}100%{transform:translate(50px, 50px)}}.map-loader__gradient{position:absolute;top:0;left:0;right:0;bottom:0;background:radial-gradient(ellipse at 20% 30%, var(--loader-primary-rgba-015, rgba(78, 204, 242, 0.15)) 0%, transparent 50%),radial-gradient(ellipse at 80% 70%, var(--loader-medium-rgba-04, rgba(78, 204, 242, 0.4)) 0%, transparent 50%),radial-gradient(ellipse at 50% 50%, var(--loader-primary-rgba-01, rgba(78, 204, 242, 0.1)) 0%, transparent 70%);animation:loaderBgPulse 4s ease-in-out infinite}@keyframes loaderBgPulse{0%,100%{opacity:.6;transform:scale(1)}50%{opacity:1;transform:scale(1.05)}}.map-loader__content{display:flex;flex-direction:column;align-items:center;gap:40px;z-index:2;position:relative}.map-loader__globe-container{position:relative;width:140px;height:140px;display:flex;align-items:center;justify-content:center}.map-loader__globe{position:relative;width:120px;height:120px;display:flex;align-items:center;justify-content:center}.map-loader__globe-inner{position:relative;width:90px;height:90px}.map-loader__globe-ring{position:absolute;border:2.5px solid rgba(0,0,0,0);border-radius:50%;top:50%;left:50%;transform:translate(-50%, -50%)}.map-loader__globe-ring--1{width:100%;height:100%;border-top-color:var(--loader-primary, #4eccf2);border-left-color:var(--loader-primary-rgba-04, rgba(78, 204, 242, 0.4));border-right-color:var(--loader-primary-rgba-02, rgba(78, 204, 242, 0.2));animation:globeRingSpin1 3s linear infinite;box-shadow:0 0 20px var(--loader-primary-rgba-03, rgba(78, 204, 242, 0.3))}.map-loader__globe-ring--2{width:75%;height:75%;border-right-color:var(--loader-medium, #4eccf2);border-bottom-color:var(--loader-medium-rgba-04, rgba(78, 204, 242, 0.4));border-left-color:var(--loader-primary-rgba-02, rgba(78, 204, 242, 0.2));animation:globeRingSpin2 2.5s linear infinite reverse;box-shadow:0 0 15px var(--loader-primary-rgba-03, rgba(78, 204, 242, 0.3))}.map-loader__globe-ring--3{width:50%;height:50%;border-top-color:var(--loader-light, #91dff6);border-right-color:var(--loader-light-rgba-02, rgba(145, 223, 246, 0.4));border-bottom-color:var(--loader-primary-rgba-02, rgba(78, 204, 242, 0.2));animation:globeRingSpin3 2s linear infinite;box-shadow:0 0 10px var(--loader-primary-rgba-03, rgba(78, 204, 242, 0.3))}@keyframes globeRingSpin1{0%{transform:translate(-50%, -50%) rotateX(65deg) rotateY(0deg)}100%{transform:translate(-50%, -50%) rotateX(65deg) rotateY(360deg)}}@keyframes globeRingSpin2{0%{transform:translate(-50%, -50%) rotateX(70deg) rotateY(0deg)}100%{transform:translate(-50%, -50%) rotateX(70deg) rotateY(360deg)}}@keyframes globeRingSpin3{0%{transform:translate(-50%, -50%) rotateX(75deg) rotateY(0deg)}100%{transform:translate(-50%, -50%) rotateX(75deg) rotateY(360deg)}}.map-loader__globe-core{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:20px;height:20px;border-radius:50%;background:radial-gradient(circle, var(--loader-primary, #4eccf2), var(--loader-medium, #4eccf2));box-shadow:0 0 20px var(--loader-primary-rgba-08, rgba(78, 204, 242, 0.8)),0 0 40px var(--loader-primary-rgba-04, rgba(78, 204, 242, 0.4));animation:globeCorePulse 2s ease-in-out infinite}.map-loader__globe-core-inner{width:100%;height:100%;border-radius:50%;background:radial-gradient(circle at 30% 30%, rgba(255, 255, 255, 0.8), transparent);animation:globeCoreShine 3s ease-in-out infinite}@keyframes globeCorePulse{0%,100%{transform:translate(-50%, -50%) scale(1);opacity:1}50%{transform:translate(-50%, -50%) scale(1.2);opacity:.8}}@keyframes globeCoreShine{0%,100%{opacity:.6}50%{opacity:1}}.map-loader__pulse{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);border-radius:50%;pointer-events:none}.map-loader__pulse--1{width:120px;height:120px;background:radial-gradient(circle, var(--loader-primary-rgba-03, rgba(78, 204, 242, 0.3)) 0%, transparent 70%);animation:loaderPulse1 2s ease-out infinite}.map-loader__pulse--2{width:140px;height:140px;background:radial-gradient(circle, var(--loader-primary-rgba-02, rgba(78, 204, 242, 0.2)) 0%, transparent 70%);animation:loaderPulse2 2.5s ease-out infinite .5s}.map-loader__pulse--3{width:160px;height:160px;background:radial-gradient(circle, var(--loader-primary-rgba-015, rgba(78, 204, 242, 0.15)) 0%, transparent 70%);animation:loaderPulse3 3s ease-out infinite 1s}@keyframes loaderPulse1{0%{transform:translate(-50%, -50%) scale(0.8);opacity:.8}100%{transform:translate(-50%, -50%) scale(1.6);opacity:0}}@keyframes loaderPulse2{0%{transform:translate(-50%, -50%) scale(0.7);opacity:.6}100%{transform:translate(-50%, -50%) scale(1.8);opacity:0}}@keyframes loaderPulse3{0%{transform:translate(-50%, -50%) scale(0.6);opacity:.4}100%{transform:translate(-50%, -50%) scale(2);opacity:0}}.map-loader__particles{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:200px;height:200px}.map-loader__particle{position:absolute;width:4px;height:4px;background:var(--loader-primary, #4eccf2);border-radius:50%;top:50%;left:50%;transform:translate(-50%, -50%);box-shadow:0 0 6px var(--loader-primary-rgba-08, rgba(78, 204, 242, 0.8));animation:particleOrbit 4s linear infinite;animation-delay:calc(var(--i)*.33s)}@keyframes particleOrbit{0%{transform:translate(-50%, -50%) rotate(0deg) translateX(80px) rotate(0deg);opacity:0}10%{opacity:1}90%{opacity:1}100%{transform:translate(-50%, -50%) rotate(360deg) translateX(80px) rotate(-360deg);opacity:0}}.map-loader__text{display:flex;align-items:center;gap:4px;font-family:"Geologica",sans-serif;margin-top:10px}.map-loader__text-main{font-size:18px;font-weight:600;color:rgba(255,255,255,.95);letter-spacing:.8px;background:linear-gradient(90deg, var(--loader-primary, #4eccf2), var(--loader-medium, #4eccf2), var(--loader-light, #91dff6), var(--loader-primary, #4eccf2));background-size:300% 100%;-webkit-background-clip:text;-webkit-text-fill-color:rgba(0,0,0,0);background-clip:text;animation:textShimmer 3s ease-in-out infinite;text-shadow:0 0 20px var(--loader-primary-rgba-03, rgba(78, 204, 242, 0.3))}@keyframes textShimmer{0%{background-position:0% 50%}50%{background-position:100% 50%}100%{background-position:0% 50%}}.map-loader__dots{display:flex;align-items:center;gap:3px}.map-loader__dot{font-size:24px;font-weight:700;color:var(--loader-primary, #4eccf2);animation:dotBounce 1.4s ease-in-out infinite;text-shadow:0 0 10px var(--loader-primary-rgba-06, rgba(78, 204, 242, 0.6))}.map-loader__dot:nth-child(1){animation-delay:0s}.map-loader__dot:nth-child(2){animation-delay:.2s}.map-loader__dot:nth-child(3){animation-delay:.4s}@keyframes dotBounce{0%,60%,100%{transform:translateY(0);opacity:.5}30%{transform:translateY(-10px);opacity:1}}.map-loader__progress{width:200px;height:3px;background:rgba(255,255,255,.1);border-radius:10px;overflow:hidden;position:relative;margin-top:10px}.map-loader__progress-bar{height:100%;width:0%;background:linear-gradient(90deg, var(--loader-primary, #4eccf2), var(--loader-medium, #4eccf2), var(--loader-light, #91dff6));border-radius:10px;animation:progressLoad 2s ease-in-out infinite;box-shadow:0 0 10px var(--loader-primary-rgba-06, rgba(78, 204, 242, 0.5))}@keyframes progressLoad{0%{width:0%;transform:translateX(0)}50%{width:70%;transform:translateX(0)}100%{width:100%;transform:translateX(0)}}@keyframes borderGlow{0%,100%{border-color:var(--border-glow-start, rgba(78, 204, 242, 0.1))}50%{border-color:var(--border-glow-end, rgba(78, 204, 242, 0.35))}}.legend-container{position:absolute;left:16px;top:68px;z-index:2147483648}.legend-toggle-btn{position:relative;width:44px;height:44px;border-radius:50%;background:linear-gradient(135deg, rgba(30, 37, 55, 0.95) 0%, rgba(20, 25, 40, 0.95) 100%);backdrop-filter:blur(15px);-webkit-backdrop-filter:blur(15px);border:1px solid rgba(255,255,255,.15);display:flex;align-items:center;justify-content:center;cursor:pointer;color:#fff;transition:all .3s cubic-bezier(0.4, 0, 0.2, 1);padding:0;box-shadow:0 4px 12px rgba(0,0,0,.15),0 0 0 0 rgba(78,204,242,0);overflow:hidden}.legend-toggle-btn::before{content:"";position:absolute;top:50%;left:50%;width:0;height:0;border-radius:50%;background:radial-gradient(circle, rgba(78, 204, 242, 0.3) 0%, transparent 70%);transform:translate(-50%, -50%);transition:width .4s ease,height .4s ease}.legend-toggle-btn:hover{background:linear-gradient(135deg, rgba(40, 47, 65, 0.98) 0%, rgba(30, 35, 50, 0.98) 100%);transform:scale(1.08);border-color:rgba(78,204,242,.4);box-shadow:0 6px 20px rgba(0,0,0,.25),0 0 20px rgba(78,204,242,.2)}.legend-toggle-btn:hover::before{width:100px;height:100px}.legend-toggle-btn:active{transform:scale(0.96);transition:transform .1s ease}.legend-toggle-btn--active{background:linear-gradient(135deg, rgba(78, 204, 242, 0.25) 0%, rgba(30, 37, 55, 0.95) 100%);border-color:rgba(78,204,242,.5);box-shadow:0 6px 20px rgba(0,0,0,.25),0 0 25px rgba(78,204,242,.3)}.legend-toggle-btn__icon{position:relative;z-index:2;transition:transform .3s ease}.legend-toggle-btn:hover .legend-toggle-btn__icon{transform:rotate(5deg) scale(1.1)}.legend-toggle-btn--active .legend-toggle-btn__icon{transform:rotate(0deg)}.legend-toggle-btn svg{width:20px;height:20px;filter:drop-shadow(0 2px 4px rgba(0, 0, 0, 0.2))}.legend-panel{position:absolute;left:52px;top:0;width:320px;max-height:400px;background:linear-gradient(135deg, rgba(20, 25, 40, 0.98) 0%, rgba(30, 37, 55, 0.98) 100%);backdrop-filter:blur(25px);-webkit-backdrop-filter:blur(25px);border-radius:16px;border:1px solid rgba(255,255,255,.15);box-shadow:0 12px 40px rgba(0,0,0,.4),0 0 0 1px rgba(255,255,255,.05) inset,0 0 60px rgba(78,204,242,.1);overflow:hidden;z-index:2147483649;animation:slideRight .4s cubic-bezier(0.4, 0, 0.2, 1)}.legend-panel__header{position:relative;padding:16px 18px;border-bottom:1px solid rgba(255,255,255,.1);background:linear-gradient(135deg, rgba(78, 204, 242, 0.08) 0%, transparent 100%);overflow:hidden}.legend-panel__header-content{position:relative;z-index:2;display:flex;align-items:center;gap:10px}.legend-panel__header-icon{display:flex;align-items:center;justify-content:center;width:24px;height:24px;color:var(--theme-primary-rgba, rgba(78, 204, 242, 0.9));filter:drop-shadow(0 0 8px rgba(78, 204, 242, 0.4))}.legend-panel__header-gradient{position:absolute;top:0;left:0;right:0;height:100%;background:linear-gradient(90deg, transparent 0%, rgba(78, 204, 242, 0.1) 50%, transparent 100%);animation:shimmer 3s ease-in-out infinite}.legend-panel__title{font-size:16px;font-weight:600;color:#fff;font-family:"Geologica",sans-serif;margin:0;letter-spacing:.3px;text-shadow:0 2px 8px rgba(0,0,0,.3)}.legend-panel__content{padding:16px;display:flex;flex-direction:column;gap:12px;max-height:340px;overflow-y:auto;overflow-x:hidden}.legend-panel__content::-webkit-scrollbar{width:6px}.legend-panel__content::-webkit-scrollbar-track{background:rgba(255,255,255,.05);border-radius:10px}.legend-panel__content::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);border-radius:10px}.legend-panel__content::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.3)}.legend-item{display:flex;align-items:center;gap:12px;padding:12px;border-radius:10px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);transition:all .3s ease}.legend-item:hover{background:rgba(255,255,255,.06);border-color:rgba(255,255,255,.15);transform:translateX(4px)}.legend-item__color{display:flex;align-items:center;justify-content:center;flex-shrink:0}.legend-item__color-box{width:24px;height:24px;border-radius:4px;border-width:3px;border-style:solid;background:rgba(0,0,0,0);box-shadow:0 2px 6px rgba(0,0,0,.2);transition:all .3s ease}.legend-item:hover .legend-item__color-box{transform:scale(1.1);box-shadow:0 4px 10px rgba(0,0,0,.3)}.legend-item__label{font-size:13px;font-weight:400;color:rgba(255,255,255,.9);font-family:"Geologica",sans-serif;line-height:1.5;letter-spacing:.1px;flex:1}',""]);const l=i},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var a="",o=void 0!==t[5];return t[4]&&(a+="@supports (".concat(t[4],") {")),t[2]&&(a+="@media ".concat(t[2]," {")),o&&(a+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),a+=e(t),o&&(a+="}"),t[2]&&(a+="}"),t[4]&&(a+="}"),a})).join("")},t.i=function(e,a,o,r,n){"string"==typeof e&&(e=[[null,e,void 0]]);var i={};if(o)for(var l=0;l<this.length;l++){var s=this[l][0];null!=s&&(i[s]=!0)}for(var c=0;c<e.length;c++){var d=[].concat(e[c]);o&&i[d[0]]||(void 0!==n&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=n),a&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=a):d[2]=a),r&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=r):d[4]="".concat(r)),t.push(d))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},3379:e=>{"use strict";var t=[];function a(e){for(var a=-1,o=0;o<t.length;o++)if(t[o].identifier===e){a=o;break}return a}function o(e,o){for(var n={},i=[],l=0;l<e.length;l++){var s=e[l],c=o.base?s[0]+o.base:s[0],d=n[c]||0,u="".concat(c," ").concat(d);n[c]=d+1;var p=a(u),m={css:s[1],media:s[2],sourceMap:s[3],supports:s[4],layer:s[5]};if(-1!==p)t[p].references++,t[p].updater(m);else{var g=r(m,o);o.byIndex=l,t.splice(l,0,{identifier:u,updater:g,references:1})}i.push(u)}return i}function r(e,t){var a=t.domAPI(t);return a.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;a.update(e=t)}else a.remove()}}e.exports=function(e,r){var n=o(e=e||[],r=r||{});return function(e){e=e||[];for(var i=0;i<n.length;i++){var l=a(n[i]);t[l].references--}for(var s=o(e,r),c=0;c<n.length;c++){var d=a(n[c]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}n=s}}},569:e=>{"use strict";var t={};e.exports=function(e,a){var o=function(e){if(void 0===t[e]){var a=document.querySelector(e);if(window.HTMLIFrameElement&&a instanceof window.HTMLIFrameElement)try{a=a.contentDocument.head}catch(e){a=null}t[e]=a}return t[e]}(e);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(a)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,a)=>{"use strict";e.exports=function(e){var t=a.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(a){!function(e,t,a){var o="";a.supports&&(o+="@supports (".concat(a.supports,") {")),a.media&&(o+="@media ".concat(a.media," {"));var r=void 0!==a.layer;r&&(o+="@layer".concat(a.layer.length>0?" ".concat(a.layer):""," {")),o+=a.css,r&&(o+="}"),a.media&&(o+="}"),a.supports&&(o+="}");var n=a.sourceMap;n&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(o,e,t.options)}(t,e,a)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},6826:e=>{"use strict";e.exports=r},8891:e=>{"use strict";e.exports=a},1315:e=>{"use strict";e.exports=o},800:e=>{"use strict";e.exports=n}},c={};function d(e){var t=c[e];if(void 0!==t)return t.exports;var a=c[e]={id:e,exports:{}};return s[e](a,a.exports,d),a.exports}d.m=s,d.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return d.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,d.t=function(a,o){if(1&o&&(a=this(a)),8&o)return a;if("object"==typeof a&&a){if(4&o&&a.__esModule)return a;if(16&o&&"function"==typeof a.then)return a}var r=Object.create(null);d.r(r);var n={};e=e||[null,t({}),t([]),t(t)];for(var i=2&o&&a;"object"==typeof i&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach((e=>n[e]=()=>a[e]));return n.default=()=>a,d.d(r,n),r},d.d=(e,t)=>{for(var a in t)d.o(t,a)&&!d.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},d.f={},d.e=e=>Promise.all(Object.keys(d.f).reduce(((t,a)=>(d.f[a](e,t),t)),[])),d.u=e=>"your-extensions_widgets_Custom-map-widget_src_runtime_uzbekistan_regions_backup_json"===e?"widgets/chunks/Custom-map-widget_src_runtime_uzbekistan_regions_backup_json.js":"your-extensions_widgets_Custom-map-widget_src_runtime_tumanlanguage_json"===e?"widgets/chunks/Custom-map-widget_src_runtime_tumanlanguage_json.js":void 0,d.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i={},l="exb-client:",d.l=(e,t,a,o)=>{if(i[e])i[e].push(t);else{var r,n;if(void 0!==a)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var u=s[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")==l+a){r=u;break}}r||(n=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,d.nc&&r.setAttribute("nonce",d.nc),r.setAttribute("data-webpack",l+a),r.src=e),i[e]=[t];var p=(t,a)=>{r.onerror=r.onload=null,clearTimeout(m);var o=i[e];if(delete i[e],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((e=>e(a))),t)return t(a)},m=setTimeout(p.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=p.bind(null,r.onerror),r.onload=p.bind(null,r.onload),n&&document.head.appendChild(r)}},d.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},d.p="",(()=>{var e={"widgets/Custom-map-widget/dist/runtime/widget":0};d.f.j=(t,a)=>{var o=d.o(e,t)?e[t]:void 0;if(0!==o)if(o)a.push(o[2]);else{var r=new Promise(((a,r)=>o=e[t]=[a,r]));a.push(o[2]=r);var n=d.p+d.u(t),i=new Error;d.l(n,(a=>{if(d.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var r=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+r+": "+n+")",i.name="ChunkLoadError",i.type=r,i.request=n,o[1](i)}}),"chunk-"+t,t)}};var t=(t,a)=>{var o,r,[n,i,l]=a,s=0;if(n.some((t=>0!==e[t]))){for(o in i)d.o(i,o)&&(d.m[o]=i[o]);l&&l(d)}for(t&&t(a);s<n.length;s++)r=n[s],d.o(e,r)&&e[r]&&e[r][0](),e[r]=0},a=self.webpackChunkexb_client=self.webpackChunkexb_client||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),d.nc=void 0;var u={};return d.p=window.jimuConfig.baseUrl,(()=>{"use strict";d.r(u),d.d(u,{__set_webpack_public_path__:()=>Je,default:()=>Ye});var e=d(8891),t=d(1315);const a=({onZoomIn:t,onZoomOut:a})=>(0,e.jsx)("div",{className:"zoom-controls"},(0,e.jsx)("button",{className:"zoom-btn zoom-in",onClick:t,"aria-label":"Zoom in"},(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.jsx)("path",{d:"M10 4V16M4 10H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}))),(0,e.jsx)("button",{className:"zoom-btn zoom-out",onClick:a,"aria-label":"Zoom out"},(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.jsx)("path",{d:"M4 10H16",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"}))));var o=d(6826);const r=JSON.parse('{"modal":{"title":{"uz-Cyrl":"ÐœÐ°ÑŠÐ»ÑƒÐ¼Ð¾Ñ‚ ÐºÐ¸Ñ€Ð¸Ñ‚Ð¸Ñˆ Ð¿Ð°Ð½ÐµÐ»Ð¸","uz-Latn":"Ma\'lumot kiritish paneli","ru":"ÐŸÐ°Ð½ÐµÐ»ÑŒ Ð²Ð²Ð¾Ð´Ð° Ð´Ð°Ð½Ð½Ñ‹Ñ…"},"close":{"uz-Cyrl":"ÐÐ¿Ð¸Ñˆ","uz-Latn":"Yopish","ru":"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ"},"fields":{"objectId":{"label":{"uz-Cyrl":"ÐžÐ±ÑŠÐµÐºÑ‚ ID Ñ€Ð°Ò›Ð°Ð¼Ð¸","uz-Latn":"Obyekt ID raqami","ru":"ÐÐ¾Ð¼ÐµÑ€ Ð¾Ð±ÑŠÐµÐºÑ‚Ð° ID"},"options":{"default":{"uz-Cyrl":"ÐžÐ±ÑŠÐµÐºÑ‚ ID","uz-Latn":"Obyekt ID","ru":"ÐžÐ±ÑŠÐµÐºÑ‚ ID"},"id001":{"uz-Cyrl":"ID-001","uz-Latn":"ID-001","ru":"ID-001"},"id002":{"uz-Cyrl":"ID-002","uz-Latn":"ID-002","ru":"ID-002"},"id003":{"uz-Cyrl":"ID-003","uz-Latn":"ID-003","ru":"ID-003"}}},"year":{"label":{"uz-Cyrl":"ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ Ð¹Ð¸Ð»Ð¸","uz-Latn":"Monitoring yili","ru":"Ð“Ð¾Ð´ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°"},"options":{"2022":{"uz-Cyrl":"2022 Ð¹Ð¸Ð»","uz-Latn":"2022 yil","ru":"2022 Ð³Ð¾Ð´"},"2023":{"uz-Cyrl":"2023 Ð¹Ð¸Ð»","uz-Latn":"2023 yil","ru":"2023 Ð³Ð¾Ð´"},"2024":{"uz-Cyrl":"2024 Ð¹Ð¸Ð»","uz-Latn":"2024 yil","ru":"2024 Ð³Ð¾Ð´"},"2025":{"uz-Cyrl":"2025 Ð¹Ð¸Ð»","uz-Latn":"2025 yil","ru":"2025 Ð³Ð¾Ð´"}}},"area":{"label":{"uz-Cyrl":"Ò²ÑƒÐ´ÑƒÐ´ Ð¼Ð°Ð¹Ð´Ð¾Ð½Ð¸, Ð¼Â²","uz-Latn":"Hudud maydoni, mÂ²","ru":"ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ñ‚ÐµÑ€Ñ€Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸, Ð¼Â²"},"placeholder":{"uz-Cyrl":"Ò²ÑƒÐ´ÑƒÐ´ Ð¼Ð°Ð¹Ð´Ð¾Ð½Ð¸, Ð¼2","uz-Latn":"Hudud maydoni, m2","ru":"ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ Ñ‚ÐµÑ€Ñ€Ð¸Ñ‚Ð¾Ñ€Ð¸Ð¸, Ð¼2"}},"inspector":{"label":{"uz-Cyrl":"Ð˜Ð½ÑÐ¿ÐµÐºÑ‚Ð¾Ñ€ (Ð¤Ð˜Ðž)","uz-Latn":"Inspektor (FIO)","ru":"Ð˜Ð½ÑÐ¿ÐµÐºÑ‚Ð¾Ñ€ (Ð¤Ð˜Ðž)"},"placeholder":{"uz-Cyrl":"Ð¤Ð˜Ðž ÐºÐ¸Ñ€Ð¸Ñ‚Ð¸Ð½Ð³","uz-Latn":"FIO kiriting","ru":"Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð¤Ð˜Ðž"}},"damage":{"label":{"uz-Cyrl":"Ò²Ð¸ÑÐ¾Ð±Ð»Ð°Ð½Ð³Ð°Ð½ Ð·Ð°Ñ€Ð°Ñ€","uz-Latn":"Hisoblangan zarar","ru":"Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ð¹ ÑƒÑ‰ÐµÑ€Ð±"},"placeholder":{"uz-Cyrl":"15 Ð¼Ð»Ð½ ÑÑžÐ¼","uz-Latn":"15 mln so\'m","ru":"15 Ð¼Ð»Ð½ ÑÑƒÐ¼"}},"fine":{"label":{"uz-Cyrl":"ÒšÑžÐ»Ð»Ð°Ð½Ð¸Ð»Ð³Ð°Ð½ Ð¶Ð°Ñ€Ð¸Ð¼Ð°","uz-Latn":"Qo\'llanilgan jarima","ru":"ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð½Ñ‹Ð¹ ÑˆÑ‚Ñ€Ð°Ñ„"},"placeholder":{"uz-Cyrl":"10 Ð¼Ð»Ð½ ÑÑžÐ¼","uz-Latn":"10 mln so\'m","ru":"10 Ð¼Ð»Ð½ ÑÑƒÐ¼"}},"note":{"label":{"uz-Cyrl":"Ð˜Ð·Ð¾Ò³","uz-Latn":"Izoh","ru":"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹"},"placeholder":{"uz-Cyrl":"Ð˜Ð·Ð¾Ò³","uz-Latn":"Izoh","ru":"ÐšÐ¾Ð¼Ð¼ÐµÐ½Ñ‚Ð°Ñ€Ð¸Ð¹"}},"result":{"label":{"uz-Cyrl":"Ð¢ÐµÐºÑˆÐ¸Ñ€ÑƒÐ² Ð½Ð°Ñ‚Ð¸Ð¶Ð°ÑÐ¸","uz-Latn":"Tekshiruv natijasi","ru":"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸"},"options":{"approved":{"uz-Cyrl":"Ð¢Ð°ÑÐ´Ð¸Ò›Ð»Ð°Ð½Ð´Ð¸","uz-Latn":"Tasdiqlandi","ru":"Ð£Ñ‚Ð²ÐµÑ€Ð¶Ð´ÐµÐ½Ð¾"},"rejected":{"uz-Cyrl":"Ð Ð°Ð´ ÑÑ‚Ð¸Ð»Ð´Ð¸","uz-Latn":"Rad etildi","ru":"ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾"},"review":{"uz-Cyrl":"ÐšÑžÑ€Ð¸Ð± Ñ‡Ð¸Ò›Ð¸Ð»Ð¼Ð¾Ò›Ð´Ð°","uz-Latn":"Ko\'rib chiqilmoqda","ru":"ÐÐ° Ñ€Ð°ÑÑÐ¼Ð¾Ñ‚Ñ€ÐµÐ½Ð¸Ð¸"}}},"fileUpload":{"label":{"uz-Cyrl":"Ð¤Ð°Ð¹Ð»Ð½Ð¸ ÑŽÐºÐ»Ð°Ñˆ","uz-Latn":"Faylni yuklash","ru":"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ñ„Ð°Ð¹Ð»Ð°"},"text":{"uz-Cyrl":"Ð®ÐºÐ»Ð°Ñˆ ÑƒÑ‡ÑƒÐ½ Ð±Ð¾ÑÐ¸Ð½Ð³","uz-Latn":"Yuklash uchun bosing","ru":"ÐÐ°Ð¶Ð¼Ð¸Ñ‚Ðµ Ð´Ð»Ñ Ð·Ð°Ð³Ñ€ÑƒÐ·ÐºÐ¸"},"textSpan":{"uz-Cyrl":"Ñ‘ÐºÐ¸ Ñ„Ð°Ð¹Ð»Ð½Ð¸ Ñ‚Ð¾Ñ€Ñ‚Ð¸Ð± Ñ‚Ð°ÑˆÐ»Ð°Ð½Ð³.","uz-Latn":"yoki faylni tortib tashlang.","ru":"Ð¸Ð»Ð¸ Ð¿ÐµÑ€ÐµÑ‚Ð°Ñ‰Ð¸Ñ‚Ðµ Ñ„Ð°Ð¹Ð»."},"hint":{"uz-Cyrl":"Ð Ð°ÑÐ¼Ð»Ð°Ñ€, Word, PDF, Ð²Ð¸Ð´ÐµÐ¾ (Ð²Ð¸Ð´ÐµÐ¾ 25 ÐœÐ‘Ð³Ð°Ñ‡Ð°, Ð±Ð¾ÑˆÒ›Ð°Ð»Ð°Ñ€Ð¸ 15 ÐœÐ‘Ð³Ð°Ñ‡Ð°)","uz-Latn":"Rasmlar, Word, PDF, video (video 25 MBgacha, boshqalari 15 MBgacha)","ru":"Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ, Word, PDF, Ð²Ð¸Ð´ÐµÐ¾ (Ð²Ð¸Ð´ÐµÐ¾ Ð´Ð¾ 25 ÐœÐ‘, Ð¾ÑÑ‚Ð°Ð»ÑŒÐ½Ñ‹Ðµ Ð´Ð¾ 15 ÐœÐ‘)"},"remove":{"uz-Cyrl":"Ð¤Ð°Ð¹Ð»Ð½Ð¸ Ð¾Ð»Ð¸Ð± Ñ‚Ð°ÑˆÐ»Ð°Ñˆ","uz-Latn":"Faylni olib tashlash","ru":"Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ„Ð°Ð¹Ð»"},"errors":{"invalidType":{"uz-Cyrl":"Ð¤Ð°Ò›Ð°Ñ‚ Ñ€Ð°ÑÐ¼Ð»Ð°Ñ€, Word, PDF Ñ‘ÐºÐ¸ Ð²Ð¸Ð´ÐµÐ¾ Ñ„Ð°Ð¹Ð»Ð»Ð°Ñ€Ð¸ Ñ€ÑžÑ…ÑÐ°Ñ‚ ÑÑ‚Ð¸Ð»Ð³Ð°Ð½","uz-Latn":"Faqat rasmlar, Word, PDF yoki video fayllari ruxsat etilgan","ru":"Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ñ‹ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ, Word, PDF Ð¸Ð»Ð¸ Ð²Ð¸Ð´ÐµÐ¾ Ñ„Ð°Ð¹Ð»Ñ‹"},"tooLarge":{"uz-Cyrl":"Ð¤Ð°Ð¹Ð» Ñ…Ð°Ð¶Ð¼Ð¸ {maxSize} ÐœÐ‘Ð´Ð°Ð½ Ð¾ÑˆÐ¼Ð°ÑÐ»Ð¸Ð³Ð¸ ÐºÐµÑ€Ð°Ðº","uz-Latn":"Fayl hajmi {maxSize} MBdan oshmasligi kerak","ru":"Ð Ð°Ð·Ð¼ÐµÑ€ Ñ„Ð°Ð¹Ð»Ð° Ð½Ðµ Ð´Ð¾Ð»Ð¶ÐµÐ½ Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐ°Ñ‚ÑŒ {maxSize} ÐœÐ‘"}}}},"buttons":{"cancel":{"uz-Cyrl":"Ð‘ÐµÐºÐ¾Ñ€ Ò›Ð¸Ð»Ð¸Ñˆ","uz-Latn":"Bekor qilish","ru":"ÐžÑ‚Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ"},"submit":{"uz-Cyrl":"Ð®Ð±Ð¾Ñ€Ð¸Ñˆ","uz-Latn":"Yuborish","ru":"ÐžÑ‚Ð¿Ñ€Ð°Ð²Ð¸Ñ‚ÑŒ"}},"messages":{"success":{"uz-Cyrl":"ÐœÐ°ÑŠÐ»ÑƒÐ¼Ð¾Ñ‚Ð»Ð°Ñ€ Ð¼ÑƒÐ²Ð°Ñ„Ñ„Ð°Ò›Ð¸ÑÑ‚Ð»Ð¸ ÑÐ°Ò›Ð»Ð°Ð½Ð´Ð¸!","uz-Latn":"Ma\'lumotlar muvaffaqiyatli saqlandi!","ru":"Ð”Ð°Ð½Ð½Ñ‹Ðµ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ñ…Ñ€Ð°Ð½ÐµÐ½Ñ‹!"},"error":{"uz-Cyrl":"Ð¥Ð°Ñ‚Ð¾Ð»Ð¸Ðº ÑŽÐ· Ð±ÐµÑ€Ð´Ð¸","uz-Latn":"Xatolik yuz berdi","ru":"ÐŸÑ€Ð¾Ð¸Ð·Ð¾ÑˆÐ»Ð° Ð¾ÑˆÐ¸Ð±ÐºÐ°"}}},"popup":{"title":{"uz-Cyrl":"ÐŸÐ¾Ð»Ð¸Ð³Ð¾Ð½ Ð¼Ð°ÑŠÐ»ÑƒÐ¼Ð¾Ñ‚Ð»Ð°Ñ€Ð¸","uz-Latn":"Poligon ma\'lumotlari","ru":"Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¿Ð¾Ð»Ð¸Ð³Ð¾Ð½Ðµ"},"fields":{"viloyat":{"uz-Cyrl":"Ð’Ð¸Ð»Ð¾ÑÑ‚ Ð½Ð¾Ð¼Ð¸:","uz-Latn":"Viloyat nomi:","ru":"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ð¾Ð±Ð»Ð°ÑÑ‚Ð¸:"},"tuman":{"uz-Cyrl":"Ð¢ÑƒÐ¼Ð°Ð½ Ð½Ð¾Ð¼Ð¸:","uz-Latn":"Tuman nomi:","ru":"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ Ñ€Ð°Ð¹Ð¾Ð½Ð°:"},"mfy":{"uz-Cyrl":"ÐœÐ¤Ð™ Ð½Ð¾Ð¼Ð¸:","uz-Latn":"MFY nomi:","ru":"ÐÐ°Ð·Ð²Ð°Ð½Ð¸Ðµ ÐœÐ¤Ð™:"},"maydon":{"uz-Cyrl":"ÐœÐ°Ð¹Ð´Ð¾Ð½ (Ð³Ð°):","uz-Latn":"Maydon (ga):","ru":"ÐŸÐ»Ð¾Ñ‰Ð°Ð´ÑŒ (Ð³Ð°):"},"tur":{"uz-Cyrl":"Ð¢ÑƒÑ€:","uz-Latn":"Tur:","ru":"Ð¢Ð¸Ð¿:"},"typeDescriptions":{"0":{"uz-Cyrl":"ÐÒ³Ð¾Ð»Ð¸ ÑÑˆÐ°Ñˆ Ð¶Ð¾Ð¹Ð»Ð°Ñ€Ð¸Ð´Ð° ÑÒ³Ñ‚Ð¸Ð¼Ð¾Ð»Ð¸ ÑŽÒ›Ð¾Ñ€Ð¸ Ð±ÑžÐ»Ð³Ð°Ð½ Ð½Ð¾Ò›Ð¾Ð½ÑƒÐ½Ð¸Ð¹ Ñ‡Ð¸Ò›Ð¸Ð½Ð´Ð¸ Ð¿Ð¾Ð»Ð¸Ð³Ð¾Ð½Ð»Ð°Ñ€Ð¸ ÑÐ¾Ð½Ð¸","uz-Latn":"Aholi yashash joylarida ehtimoli yuqori bo\'lgan noqonuniy chiqindi poligonlari soni","ru":"ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð½ÐµÐ·Ð°ÐºÐ¾Ð½Ð½Ñ‹Ñ… ÑÐ²Ð°Ð»Ð¾Ðº Ñ Ð²Ñ‹ÑÐ¾ÐºÐ¾Ð¹ Ð²ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾ÑÑ‚ÑŒÑŽ Ð¾Ð±Ñ€Ð°Ð·Ð¾Ð²Ð°Ð½Ð¸Ñ Ð² Ð¶Ð¸Ð»Ñ‹Ñ… Ñ€Ð°Ð¹Ð¾Ð½Ð°Ñ…"},"1":{"uz-Cyrl":"Ð”Ð°Ñ€Ñ‘ Ð¼ÑƒÒ³Ð¾Ñ„Ð°Ð·Ð° Ò³ÑƒÐ´ÑƒÐ´Ð¸Ð´Ð°Ð³Ð¸ Ð½Ð¾Ò›Ð¾Ð½ÑƒÐ½Ð¸Ð¹ Ð¿Ð¾Ð»Ð¸Ð³Ð¾Ð½Ð»Ð°Ñ€ ÑÐ¾Ð½Ð¸","uz-Latn":"Daryo muhofaza hududidagi noqonuniy poligonlar soni","ru":"ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð½ÐµÐ·Ð°ÐºÐ¾Ð½Ð½Ñ‹Ñ… ÑÐ²Ð°Ð»Ð¾Ðº Ð² Ð·Ð¾Ð½Ðµ Ð¾Ñ…Ñ€Ð°Ð½Ñ‹ Ñ€ÐµÐºÐ¸"},"2":{"uz-Cyrl":"Ð¡Ð°Ð½Ð¾Ð°Ñ‚ Ð·Ð¾Ð½Ð°Ð»Ð°Ñ€Ð¸Ð´Ð° ÑÒ³Ñ‚Ð¸Ð¼Ð¾Ð»Ð¸ ÑŽÒ›Ð¾Ñ€Ð¸ Ð±ÑžÐ»Ð³Ð°Ð½ Ð½Ð¾Ò›Ð¾Ð½ÑƒÐ½Ð¸Ð¹ Ñ‡Ð¸Ò›Ð¸Ð½Ð´Ð¸ Ð¿Ð¾Ð»Ð¸Ð³Ð¾Ð½Ð»Ð°Ñ€Ð¸ ÑÐ¾Ð½Ð¸","uz-Latn":"Sanoat zonlarida ehtimoli yuqori bo\'lgan noqonuniy chiqindi poligonlari soni","ru":"Ð’ÐµÑ€Ð¾ÑÑ‚Ð½Ð¾Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð½ÐµÐ·Ð°ÐºÐ¾Ð½Ð½Ñ‹Ñ… ÑÐ²Ð°Ð»Ð¾Ðº Ð² Ð¿Ñ€Ð¾Ð¼Ñ‹ÑˆÐ»ÐµÐ½Ð½Ñ‹Ñ… Ð·Ð¾Ð½Ð°Ñ…"},"3":{"uz-Cyrl":"ÒšÐ¾Ð½ÑƒÐ½Ð¸Ð¹ Ñ‡Ð¸Ò›Ð¸Ð½Ð´Ð¸ Ð¿Ð¾Ð»Ð¸Ð³Ð¾Ð½Ð»Ð°Ñ€Ð¸ Ñ‡ÐµÐ³Ð°Ñ€Ð°ÑÐ¸Ð´Ð°Ð½ Ñ‚Ð°ÑˆÒ›Ð°Ñ€Ð¸Ð³Ð° Ñ‡Ð¸Ò›Ð¸Ñˆ Ò³Ð¾Ð»Ð°Ñ‚Ð¸ ÑÐ¾Ð½Ð¸","uz-Latn":"Qonuniy chiqindi poligonlari chegarasidan tashqariga chiqish holati soni","ru":"ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ ÑÐ»ÑƒÑ‡Ð°ÐµÐ² Ð¿Ñ€ÐµÐ²Ñ‹ÑˆÐµÐ½Ð¸Ñ Ð´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ñ‹Ñ… Ð½Ð¾Ñ€Ð¼ Ð¿Ð¾ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ñƒ Ð½ÐµÐ·Ð°ÐºÐ¾Ð½Ð½Ñ‹Ñ… ÑÐ²Ð°Ð»Ð¾Ðº"},"4":{"uz-Cyrl":"ÒšÐ¾Ð½ÑƒÐ½Ð¸Ð¹ Ñ‡Ð¸Ò›Ð¸Ð½Ð´Ð¸ Ð¿Ð¾Ð»Ð¸Ð³Ð¾Ð½Ð»Ð°Ñ€Ð¸Ð½Ð¸Ð½Ð³ ÑƒÐ¼ÑƒÐ¼Ð¸Ð¹ ÑÐ¾Ð½Ð¸","uz-Latn":"Qonuniy chiqindi poligonlarining umumiy soni","ru":"ÐžÐ±Ñ‰ÐµÐµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾ Ð»ÐµÐ³Ð°Ð»ÑŒÐ½Ñ‹Ñ… ÑÐ²Ð°Ð»Ð¾Ðº"}},"yil":{"uz-Cyrl":"ÐœÐ¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³ ÑžÑ‚ÐºÐ°Ð·Ð°Ð»Ð³Ð°Ð½ ÑÐ°Ð½Ð°:","uz-Latn":"Monitoring o\'tkazilgan sana:","ru":"Ð”Ð°Ñ‚Ð° Ð¿Ñ€Ð¾Ð²ÐµÐ´ÐµÐ½Ð¸Ñ Ð¼Ð¾Ð½Ð¸Ñ‚Ð¾Ñ€Ð¸Ð½Ð³Ð°:"},"yerToifa":{"uz-Cyrl":"Ð•Ñ€ Ñ‚Ð¾Ð¸Ñ„Ð°ÑÐ¸:","uz-Latn":"Yer toifasi:","ru":"ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð·ÐµÐ¼Ð»Ð¸:"},"natija":{"uz-Cyrl":"ÐÐ°Ñ‚Ð¸Ð¶Ð°:","uz-Latn":"Natija:","ru":"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚:"},"tavsif":{"uz-Cyrl":"Ð¢Ð°Ð²ÑÐ¸Ñ„:","uz-Latn":"Tavsif:","ru":"ÐžÐ¿Ð¸ÑÐ°Ð½Ð¸Ðµ:"},"inspektor":{"uz-Cyrl":"Ð˜Ð½ÑÐ¿ÐµÐºÑ‚Ð¾Ñ€:","uz-Latn":"Inspektor:","ru":"Ð˜Ð½ÑÐ¿ÐµÐºÑ‚Ð¾Ñ€:"},"jarima":{"uz-Cyrl":"Ð–Ð°Ñ€Ð¸Ð¼Ð° Ò›ÑžÐ»Ð»Ð°Ð½Ð¸Ð»Ð´Ð¸:","uz-Latn":"Jarima qo\'llanildi:","ru":"ÐŸÑ€Ð¸Ð¼ÐµÐ½ÐµÐ½Ð½Ñ‹Ð¹ ÑˆÑ‚Ñ€Ð°Ñ„:"},"zarar":{"uz-Cyrl":"Ò²Ð¸ÑÐ¾Ð±Ð»Ð°Ð½Ð³Ð°Ð½ Ð·Ð°Ñ€Ð°Ñ€:","uz-Latn":"Hisoblangan zarar:","ru":"Ð Ð°ÑÑÑ‡Ð¸Ñ‚Ð°Ð½Ð½Ñ‹Ð¹ ÑƒÑ‰ÐµÑ€Ð±:"},"holat":{"uz-Cyrl":"Ò²Ð¾Ð»Ð°Ñ‚ Ð±Ð°Ñ€Ñ‚Ð°Ñ€Ð°Ñ„ ÑÑ‚Ð¸Ð»Ð´Ð¸:","uz-Latn":"Holat bartaraf etildi:","ru":"Ð¡Ð¾ÑÑ‚Ð¾ÑÐ½Ð¸Ðµ ÑƒÑÑ‚Ñ€Ð°Ð½ÐµÐ½Ð¾:"},"buzilish":{"uz-Cyrl":"Ð‘ÑƒÐ·Ð¸Ð»Ð¸Ñˆ:","uz-Latn":"Buzilish:","ru":"ÐŸÐ¾Ð²Ñ€ÐµÐ¶Ð´ÐµÐ½Ð¸Ðµ:"},"coordinates":{"uz-Cyrl":"ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ð°Ð»Ð°Ñ€","uz-Latn":"Koordinatalar","ru":"ÐšÐ¾Ð¾Ñ€Ð´Ð¸Ð½Ð°Ñ‚Ñ‹"},"latitude":{"uz-Cyrl":"ÐšÐµÐ½Ð³Ð»Ð¸Ðº:","uz-Latn":"Kenglik:","ru":"Ð¨Ð¸Ñ€Ð¾Ñ‚Ð°:"},"longitude":{"uz-Cyrl":"Ð£Ð·ÑƒÐ½Ð»Ð¸Ðº:","uz-Latn":"Uzunlik:","ru":"Ð”Ð¾Ð»Ð³Ð¾Ñ‚Ð°:"},"globalId":{"uz-Cyrl":"GlobalID:","uz-Latn":"GlobalID:","ru":"GlobalID:"},"tekshiruvNatijasi":{"uz-Cyrl":"Ð¢ÐµÐºÑˆÐ¸Ñ€ÑƒÐ² Ð½Ð°Ñ‚Ð¸Ð¶Ð°ÑÐ¸:","uz-Latn":"Tekshiruv natijasi:","ru":"Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚ Ð¿Ñ€Ð¾Ð²ÐµÑ€ÐºÐ¸:"},"gid":{"uz-Cyrl":"GID:","uz-Latn":"GID:","ru":"GID:"},"district":{"uz-Cyrl":"District:","uz-Latn":"District:","ru":"District:"},"region":{"uz-Cyrl":"Region:","uz-Latn":"Region:","ru":"Region:"},"mahallaId":{"uz-Cyrl":"Mahalla ID:","uz-Latn":"Mahalla ID:","ru":"Mahalla ID:"}},"files":{"title":{"uz-Cyrl":"Ð®ÐºÐ»Ð°Ð½Ð³Ð°Ð½ Ñ„Ð°Ð¹Ð»Ð»Ð°Ñ€","uz-Latn":"Yuklangan fayllar","ru":"Ð—Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð½Ñ‹Ðµ Ñ„Ð°Ð¹Ð»Ñ‹"}},"buttons":{"edit":{"uz-Cyrl":"ÐŽÐ·Ð³Ð°Ñ€Ñ‚Ð¸Ñ€Ð¸Ñˆ","uz-Latn":"O\'zgartirish","ru":"Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ"},"editInfo":{"uz-Cyrl":"ÐœÐ°ÑŠÐ»ÑƒÐ¼Ð¾Ñ‚ Ñ‚Ð°Ò³Ñ€Ð¸Ñ€Ð»Ð°Ñˆ","uz-Latn":"Ma\'lumot tahrirlash","ru":"Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ"}},"errors":{"noPermission":{"uz-Cyrl":"Ð¡Ð¸Ð·Ð´Ð° ÐµÑ‚Ð°Ñ€Ð»Ð¸ Ò³ÑƒÒ›ÑƒÒ›Ð»Ð°Ñ€ Ð¹ÑžÒ›","uz-Latn":"Sizda etarli huquqlar yo\'q","ru":"Ð£ Ð²Ð°Ñ Ð½ÐµÐ´Ð¾ÑÑ‚Ð°Ñ‚Ð¾Ñ‡Ð½Ð¾ Ð¿Ñ€Ð°Ð²"}}},"loader":{"loading":{"uz-Cyrl":"Ð¥Ð°Ñ€Ð¸Ñ‚Ð° ÑŽÐºÐ»Ð°Ð½Ð¼Ð¾Ò›Ð´Ð°","uz-Latn":"Xarita yuklanmoqda","ru":"ÐšÐ°Ñ€Ñ‚Ð° Ð·Ð°Ð³Ñ€ÑƒÐ¶Ð°ÐµÑ‚ÑÑ"}},"basemap":{"title":{"uz-Cyrl":"ÐÑÐ¾ÑÐ¸Ð¹ Ñ…Ð°Ñ€Ð¸Ñ‚Ð°Ð»Ð°Ñ€","uz-Latn":"Asosiy xaritalar","ru":"ÐžÑÐ½Ð¾Ð²Ð½Ñ‹Ðµ ÐºÐ°Ñ€Ñ‚Ñ‹"}},"legend":{"title":{"uz-Cyrl":"Ð›ÐµÐ³ÐµÐ½Ð´Ð°","uz-Latn":"Legenda","ru":"Ð›ÐµÐ³ÐµÐ½Ð´Ð°"}},"toast":{"close":{"uz-Cyrl":"ÐÐ¿Ð¸Ñˆ","uz-Latn":"Yopish","ru":"Ð—Ð°ÐºÑ€Ñ‹Ñ‚ÑŒ"}}}'),n="customLocal",i="ru";function l(){if("undefined"==typeof window)return i;try{const e=localStorage.getItem(n);if(e&&("uz-Cyrl"===e||"uz-Latn"===e||"ru"===e))return e}catch(e){}return i}function s(){const[e,a]=(0,t.useState)(l());return(0,t.useEffect)((()=>{const e=setInterval((()=>{const e=l();a((t=>e!==t?e:t))}),2e3);return()=>{clearInterval(e)}}),[]),(0,t.useEffect)((()=>{const e=e=>{if(e.key===n||null===e.key){const e=l();a(e)}};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}}),[]),(0,t.useEffect)((()=>{const e=()=>{const e=l();a((t=>e!==t?e:t))};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}}),[]),(0,t.useEffect)((()=>{const e=()=>{if(!document.hidden){const e=l();a((t=>e!==t?e:t))}};return document.addEventListener("visibilitychange",e),()=>{document.removeEventListener("visibilitychange",e)}}),[]),{locale:e,t:(t,a)=>{try{const a=t.split(".");let o=r;for(const e of a){if(null==o)return t;if(o=o[e],void 0===o)return t}return"object"==typeof o&&null!==o?o[e]||o[i]||t:String(o)}catch(e){return t}}}}var c=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};const p={vektor:[{id:"streets-night-vector",title:"Streets (Night)"},{id:"dark-gray-vector",title:"Dark Gray Canvas"}],raster:[{id:"satellite",title:"Satellite"},{id:"hybrid",title:"Hybrid"},{id:"topo",title:"Topographic"}]},m={"streets-night-vector":"streets-night-vector","dark-gray-vector":"dark-gray-vector",satellite:"satellite",hybrid:"hybrid",topo:"topo"},g=({onChangeBasemap:a,currentBasemap:r="hybrid",onToggleImageService:n})=>{const{t:i}=s(),[l,d]=(0,t.useState)(!1),[u,g]=(0,t.useState)({}),[f,b]=(0,t.useState)((()=>{try{return"true"===localStorage.getItem("custom-map-widget-imageservice")}catch(e){return!1}})),h=(0,t.useRef)(null);(0,t.useEffect)((()=>{l&&0===Object.keys(u).length&&c(void 0,void 0,void 0,(function*(){try{const[e]=yield(0,o.loadArcGISJSAPIModules)(["esri/Basemap"]),t=Object.values(p).flat().map((t=>c(void 0,void 0,void 0,(function*(){const a=m[t.id]||t.id;try{const o=e.fromId(a);yield o.load();let r=null;return o.portalItem&&(yield o.portalItem.load(),r=o.portalItem.thumbnailUrl||null),!r&&o.thumbnailUrl&&(r=o.thumbnailUrl),{id:t.id,url:r}}catch(e){return{id:t.id,url:null}}})))),a=yield Promise.all(t),r={};a.forEach((({id:e,url:t})=>{r[e]=t})),g(r)}catch(e){}}))}),[l]),(0,t.useEffect)((()=>{const e=e=>{h.current&&!h.current.contains(e.target)&&d(!1)};if(l)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[l]);const v=e=>c(void 0,void 0,void 0,(function*(){yield a(e),d(!1)})),_=e=>m[e.id]||e.id;return(0,e.jsx)("div",{className:"basemap-gallery-container",ref:h},(0,e.jsx)("button",{className:"basemap-toggle-btn "+(l?"basemap-toggle-btn--active":""),onClick:()=>d(!l),"aria-label":"Toggle basemap gallery",title:i("basemap.title")},(0,e.jsx)("div",{className:"basemap-toggle-btn__icon"},(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.jsx)("path",{d:"M3 7L10 3L17 7V13L10 17L3 13V7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)("path",{d:"M3 7L10 11L17 7",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)("path",{d:"M10 11V17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))),l&&(0,e.jsx)("div",{className:"basemap-gallery"},(0,e.jsx)("div",{className:"basemap-gallery__header"},(0,e.jsx)("div",{className:"basemap-gallery__header-content"},(0,e.jsx)("div",{className:"basemap-gallery__header-icon"},(0,e.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.jsx)("path",{d:"M3 7L10 3L17 7V13L10 17L3 13V7Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,e.jsx)("h3",{className:"basemap-gallery__title"},i("basemap.title"))),(0,e.jsx)("div",{className:"basemap-gallery__header-gradient"})),(0,e.jsx)("div",{className:"basemap-gallery__content"},(0,e.jsx)("div",{className:"basemap-gallery__section"},(0,e.jsx)("div",{className:"basemap-gallery__section-title"},"Vektor"),p.vektor.map((t=>{const a=_(t),o=r===a;return(0,e.jsx)("div",{key:t.id,className:"basemap-option "+(o?"basemap-option--selected":""),onClick:()=>v(a)},(0,e.jsx)("div",{className:"basemap-option__content"},(0,e.jsx)("div",{className:"basemap-option__thumbnail"},u[t.id]?(0,e.jsx)("img",{src:u[t.id],alt:t.title,className:"basemap-option__thumbnail-img",loading:"lazy",onError:e=>{var t;const a=e.target;a.style.display="none";const o=null===(t=a.parentElement)||void 0===t?void 0:t.querySelector(".basemap-option__thumbnail-inner");o&&(o.style.display="block")}}):null,(0,e.jsx)("div",{className:"basemap-option__thumbnail-inner",style:{display:u[t.id]?"none":"block"}})),(0,e.jsx)("span",{className:"basemap-option__title"},t.title)),o&&(0,e.jsx)("div",{className:"basemap-option__check"},(0,e.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.jsx)("path",{d:"M13.3333 4L6 11.3333L2.66667 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))))}))),(0,e.jsx)("div",{className:"basemap-gallery__section"},(0,e.jsx)("div",{className:"basemap-gallery__section-title"},"Raster"),p.raster.map((t=>{const a=_(t),o=r===a;return(0,e.jsx)("div",{key:t.id,className:"basemap-option "+(o?"basemap-option--selected":""),onClick:()=>v(a)},(0,e.jsx)("div",{className:"basemap-option__content"},(0,e.jsx)("div",{className:"basemap-option__thumbnail"},u[t.id]?(0,e.jsx)("img",{src:u[t.id],alt:t.title,className:"basemap-option__thumbnail-img",loading:"lazy",onError:e=>{var t;const a=e.target;a.style.display="none";const o=null===(t=a.parentElement)||void 0===t?void 0:t.querySelector(".basemap-option__thumbnail-inner");o&&(o.style.display="block")}}):null,(0,e.jsx)("div",{className:"basemap-option__thumbnail-inner",style:{display:u[t.id]?"none":"block"}})),(0,e.jsx)("span",{className:"basemap-option__title"},t.title)),o&&(0,e.jsx)("div",{className:"basemap-option__check"},(0,e.jsx)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.jsx)("path",{d:"M13.3333 4L6 11.3333L2.66667 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))))}))),(0,e.jsx)("div",{className:"basemap-gallery__footer"},(0,e.jsx)("label",{className:"basemap-checkbox"},(0,e.jsx)("input",{type:"checkbox",checked:f,onChange:e=>c(void 0,void 0,void 0,(function*(){const t=e.target.checked;b(t);try{localStorage.setItem("custom-map-widget-imageservice",t.toString())}catch(e){}n&&(yield n(t))}))}),(0,e.jsx)("span",null,"Kartografik asos"))))))},f=e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,b=e=>{let t="#FF006E",a=[255,0,110,1];const o=null!=e?Number(e):null;return 0===o?(t="#00D9FF",a=[0,217,255,1]):1===o?(t="#0066FF",a=[0,102,255,1]):2===o?(t="#9D4EDD",a=[157,78,221,1]):3===o?(t="#FF006E",a=[255,0,110,1]):4===o&&(t="#00FF88",a=[0,255,136,1]),{fillColor:t,outlineColor:a}},h=(e,t,a)=>{let o=1.5;const{fillColor:r,outlineColor:n}=b(a),i=null!=a?Number(a):null;if(void 0!==e){const a=Math.round(2*e)/2,r=`${a}_${null!=i?i:"null"}`;if(null==t?void 0:t.has(r))return t.get(r);o=1.5+6.5*(1-(Math.max(1,Math.min(20,a))-1)/19)}const l={type:"simple-fill",color:[0,0,0,0],outline:{color:n,width:Math.max(o,2)}};if(void 0!==e&&t){const a=`${Math.round(2*e)/2}_${null!=i?i:"null"}`;t.set(a,l)}return l},v=e=>{const{fillColor:t,outlineColor:a}=b(e),o=(r=t,[parseInt(r.slice(1,3),16),parseInt(r.slice(3,5),16),parseInt(r.slice(5,7),16)]);var r;const n=[Math.min(255,Math.round(1.5*a[0])),Math.min(255,Math.round(1.5*a[1])),Math.min(255,Math.round(1.5*a[2])),1];return{type:"simple-fill",color:[o[0],o[1],o[2],.4],outline:{color:n,width:5}}},_=()=>{const{t:a,locale:o}=s(),[r,n]=(0,t.useState)(!1),i=(0,t.useRef)(null),l=[{type:0,color:b(0).outlineColor,label:a("popup.fields.typeDescriptions.0")},{type:1,color:b(1).outlineColor,label:a("popup.fields.typeDescriptions.1")},{type:2,color:b(2).outlineColor,label:a("popup.fields.typeDescriptions.2")},{type:3,color:b(3).outlineColor,label:a("popup.fields.typeDescriptions.3")},{type:4,color:b(4).outlineColor,label:a("popup.fields.typeDescriptions.4")}];return(0,t.useEffect)((()=>{const e=e=>{i.current&&!i.current.contains(e.target)&&n(!1)};if(r)return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[r]),(0,e.jsx)("div",{className:"legend-container",ref:i},(0,e.jsx)("button",{className:"legend-toggle-btn "+(r?"legend-toggle-btn--active":""),onClick:()=>n(!r),"aria-label":"Toggle legend",title:a("legend.title")},(0,e.jsx)("div",{className:"legend-toggle-btn__icon"},(0,e.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.jsx)("path",{d:"M3 3H17V17H3V3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)("path",{d:"M3 7H17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)("path",{d:"M7 3V17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)("path",{d:"M11 3V17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))),r&&(0,e.jsx)("div",{className:"legend-panel"},(0,e.jsx)("div",{className:"legend-panel__header"},(0,e.jsx)("div",{className:"legend-panel__header-content"},(0,e.jsx)("div",{className:"legend-panel__header-icon"},(0,e.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,e.jsx)("path",{d:"M3 3H17V17H3V3Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,e.jsx)("path",{d:"M3 7H17",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,e.jsx)("h3",{className:"legend-panel__title"},a("legend.title"))),(0,e.jsx)("div",{className:"legend-panel__header-gradient"})),(0,e.jsx)("div",{className:"legend-panel__content"},l.map((t=>{return(0,e.jsx)("div",{key:t.type,className:"legend-item"},(0,e.jsx)("div",{className:"legend-item__color"},(0,e.jsx)("div",{className:"legend-item__color-box",style:{borderColor:(a=t.color,`rgb(${a[0]}, ${a[1]}, ${a[2]})`),backgroundColor:"transparent",borderWidth:"3px",borderStyle:"solid"}})),(0,e.jsx)("span",{className:"legend-item__label"},t.label));var a})))))},y="Custom-map-widget",x={center:[64,41.5],zoom:6},w=e=>{try{return localStorage.getItem(e)}catch(e){return null}},k=e=>{try{const t=localStorage.getItem(e);return t?JSON.parse(t):null}catch(e){return null}},z=()=>{const[e,a]=(0,t.useState)((()=>({selectedYear:w("selectedYear"),selectedSoato:w("selectedSoato"),selectedDistrict:w("selectedDistrict"),selectedTypeId:k("selectedTypeId"),status:w("status"),selectedId:w("selectedId"),customLocal:w("customLocal"),authToken:w("authToken")||w("token")}))),[o,r]=(0,t.useState)(0),n=(0,t.useRef)(null),i=(0,t.useRef)(e),l=(0,t.useCallback)((()=>{const e={selectedYear:w("selectedYear"),selectedSoato:w("selectedSoato"),selectedDistrict:w("selectedDistrict"),selectedTypeId:k("selectedTypeId"),status:w("status"),selectedId:w("selectedId"),customLocal:w("customLocal"),authToken:w("authToken")||w("token")};Object.keys(e).some((t=>e[t]!==i.current[t]))&&(i.current=e,a(e),r((e=>e+1)))}),[]);return(0,t.useEffect)((()=>{const e=e=>{["selectedYear","selectedSoato","selectedDistrict","selectedTypeId","status","selectedId","customLocal","authToken","token"].includes(e.key||"")&&l()},t=e=>{e.detail,l()},a=e=>{l()},o=e=>{l()},r=e=>{l()},i=e=>{l()};return window.addEventListener("storage",e),window.addEventListener("custom-map-region-change",t),window.addEventListener("custom-map-district-change",a),window.addEventListener("custom-map-type-change",o),window.addEventListener("custom-map-status-change",r),window.addEventListener("custom-map-id-change",i),n.current=setInterval(l,2e3),()=>{window.removeEventListener("storage",e),window.removeEventListener("custom-map-region-change",t),window.removeEventListener("custom-map-district-change",a),window.removeEventListener("custom-map-type-change",o),window.removeEventListener("custom-map-status-change",r),window.removeEventListener("custom-map-id-change",i),n.current&&clearInterval(n.current)}}),[l]),(0,t.useEffect)((()=>{l()}),[]),{filters:e,filtersRevision:o,updateFilters:l}};var E=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};let j=null,C=null,S=null,N=null;const L=e=>{if(!e||"all"===e)return{region:"all",district:null};const t=e.length;return 4===t?{region:e,district:null}:7===t?{region:e.substring(0,4),district:e}:10===t?{region:e.substring(0,4),district:e.substring(0,7)}:{region:e,district:null}},I=e=>E(void 0,void 0,void 0,(function*(){return j||S||(S=E(void 0,void 0,void 0,(function*(){var t,a;const o=window.location.origin,r=(null===(t=window.jimuConfig)||void 0===t?void 0:t.baseUrl)||"",n=e?e.endsWith("/")?e:`${e}/`:"",i=[n?`${n}dist/runtime/Viloyat.json`:null,n?`${n}src/runtime/Viloyat.json`:null,`${o}/widgets/${y}/dist/runtime/Viloyat.json`,`${r}/widgets/${y}/dist/runtime/Viloyat.json`].filter(Boolean);for(const e of i)try{const t=yield fetch(e);if(t.ok){const e=yield t.json();if((null===(a=null==e?void 0:e.features)||void 0===a?void 0:a.length)||void 0!==(null==e?void 0:e.displayFieldName))return j=e,e}}catch(e){}return null})),S)})),M=e=>E(void 0,void 0,void 0,(function*(){return C||N||(N=E(void 0,void 0,void 0,(function*(){var t,a;const o=window.location.origin,r=(null===(t=window.jimuConfig)||void 0===t?void 0:t.baseUrl)||"",n=e?e.endsWith("/")?e:`${e}/`:"",i=[n?`${n}dist/runtime/Tuman.json`:null,n?`${n}src/runtime/Tuman.json`:null,`${o}/widgets/${y}/dist/runtime/Tuman.json`,`${r}/widgets/${y}/dist/runtime/Tuman.json`].filter(Boolean);for(const e of i)try{const t=yield fetch(e);if(t.ok){const e=yield t.json();if((null===(a=null==e?void 0:e.features)||void 0===a?void 0:a.length)||void 0!==(null==e?void 0:e.displayFieldName))return C=e,e}}catch(e){}return null})),N)}));var T=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};const $="https://api-test.spacemc.uz",P=556597,D=13914936,R=1565430,F=10644926,q=new Map,G=(e,t,a,o,r)=>{var n;try{const r=(e=>{const t=e.extent;return t?`${t.xmin.toFixed(2)}_${t.ymin.toFixed(2)}_${t.xmax.toFixed(2)}_${t.ymax.toFixed(2)}`:""})(e);if(r&&q.has(r)){const e=q.get(r);if(e&&e.extent)return e}let i=e;const l=null===(n=e.spatialReference)||void 0===n?void 0:n.wkid;3857===l||102100===l||900913===l||console.warn("[Custom-map-widget] Region polygon is not in Web Mercator, wkid:",l);const s=((e,t,a,o)=>{var r;null===(r=t.spatialReference)||void 0===r||r.wkid;const n=new o({wkid:3857});return new a({rings:[[[P,R],[D,R],[D,F],[P,F],[P,R]]],spatialReference:n})})(0,i,t,a),c=o.difference(s,i);if(c&&r){if(q.size>5){const e=q.keys().next().value;q.delete(e)}q.set(r,c)}return c}catch(e){return null}},A=()=>{q.clear()},O=(e,t)=>new t({geometry:e,symbol:{type:"simple-fill",color:[6,10,24,.72],outline:{color:[0,0,0,0],width:0}}}),U=(e,t,a,o)=>{var r,n,i,l;if(!(null==e?void 0:e.geometry))return null;if(e.geometry.rings&&!e.geometry.type)try{const o=(null===(r=e.geometry.spatialReference)||void 0===r?void 0:r.wkid)||(null===(i=null===(n=e.attributes)||void 0===n?void 0:n.spatialReference)||void 0===i?void 0:i.wkid)||3857;let s=e.geometry.rings;if(32642===o){const e=null===(l=s[0])||void 0===l?void 0:l[0];if(e&&e.length>=2){const[t,a]=e;t>4e6&&a<1e6?(console.warn("[Custom-map-widget] UTM coordinates appear swapped (northing/easting), correcting to easting/northing"),s=s.map((e=>e.map((e=>[e[1],e[0]]))))):(console.warn("[Custom-map-widget] UTM 32642 coordinates - trying swapped order for Viloyat.json"),s=s.map((e=>e.map((e=>[e[1],e[0]])))))}}return new t({rings:s,spatialReference:new a({wkid:o})})}catch(e){return null}const s=e.geometry.coordinates;if("Polygon"===e.geometry.type){const r=s;if(0===r.length)return null;if(e.geometry.rings&&o)try{const r=((e,t)=>e.map((e=>e.map((e=>{const[a,o]=e,[r,n]=t.xyToLngLat(a,o);return[r,n]})))))(e.geometry.rings,o);return new t({rings:r,spatialReference:a.WGS84})}catch(e){return null}return new t({rings:r,spatialReference:a.WGS84})}if("MultiPolygon"===e.geometry.type){const e=s,o=[];for(const t of e)t&&t.length>0&&o.push(...t);return 0===o.length?null:new t({rings:o,spatialReference:a.WGS84})}return null},W=(e,t)=>{var a;return(null===(a=null==e?void 0:e.features)||void 0===a?void 0:a.length)&&t?e.features.find((e=>{var a,o,r;const n=e.attributes||e.properties||{},i=`${null!==(a=n.district)&&void 0!==a?a:""}`,l=`${null!==(o=n.soato)&&void 0!==o?o:""}`,s=`${null!==(r=n.code)&&void 0!==r?r:""}`;return i===t||l===t||s===t})):null},B=(e,t)=>{if(!(null==e?void 0:e.features)||!t||"all"===t)return null;const a=String(t);return e.features.find((e=>{var t,o;const r=e.attributes||e.properties||{},n=`${null!==(t=r.parent_cod)&&void 0!==t?t:""}`,i=`${null!==(o=r.region_soato)&&void 0!==o?o:""}`;return n===a||i===a}))};let H=null;const Z=()=>{return e=void 0,t=void 0,r=function*(){if(H)return H;const[e,t,a,r,n]=yield(0,o.loadArcGISJSAPIModules)(["esri/geometry/geometryEngine","esri/geometry/Polygon","esri/geometry/SpatialReference","esri/Graphic","esri/geometry/support/webMercatorUtils"]);return H={geometryEngine:e,Polygon:t,SpatialReference:a,Graphic:r,webMercatorUtils:n},H},new((a=void 0)||(a=Promise))((function(o,n){function i(e){try{s(r.next(e))}catch(e){n(e)}}function l(e){try{s(r.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((r=r.apply(e,t||[])).next())}));var e,t,a,r},Y=e=>{if(!e||"all"===e)return{region:"all",district:null};const t=e.length;return 4===t?{region:e,district:null}:7===t?{region:e.substring(0,4),district:e}:10===t?{region:e.substring(0,4),district:e.substring(0,7)}:{region:e,district:null}};let J=null,V=null;const X=(e,t)=>{return a=void 0,r=void 0,i=function*(){var a;try{if(!e||!e.rings||0===e.rings.length)return null;const r=null===(a=e.spatialReference)||void 0===a?void 0:a.wkid;if(!r||3857===r||102100===r)return e;const[n]=yield(0,o.loadArcGISJSAPIModules)(["esri/tasks/GeometryService"]),i=new n("https://utility.arcgisonline.com/ArcGIS/rest/services/Geometry/GeometryServer"),l=new t.SpatialReference({wkid:3857}),s=yield i.project([e],l);if(s&&s.length>0){const a=s[0],o=a.extent;if(o&&!(o.xmin>5e6&&o.xmax<9e6&&o.ymin>4e6&&o.ymax<6e6)){console.warn("[Custom-map-widget] Converted coordinates seem incorrect, trying to swap x/y");const a=e.rings.map((e=>e.map((e=>[e[1],e[0]])))),o=new t.Polygon({rings:a,spatialReference:e.spatialReference}),r=yield i.project([o],l);if(r&&r.length>0){const e=r[0],t=e.extent;if(t&&t.xmin>5e6&&t.xmax<9e6&&t.ymin>4e6&&t.ymax<6e6)return e}}return a}return null}catch(e){return console.warn("[Custom-map-widget] Error converting UTM to Web Mercator:",e),null}},new((n=void 0)||(n=Promise))((function(e,t){function o(e){try{s(i.next(e))}catch(e){t(e)}}function l(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var a;t.done?e(t.value):(a=t.value,a instanceof n?a:new n((function(e){e(a)}))).then(o,l)}s((i=i.apply(a,r||[])).next())}));var a,r,n,i};const K=(e,t,a)=>{return o=void 0,r=void 0,i=function*(){var o,r;const{Polygon:n,SpatialReference:i,geometryEngine:l,webMercatorUtils:s}=e,c=localStorage.getItem("selectedSoato"),{region:u,district:p}=Y(c),m=p;if(m&&(null===(o=null==a?void 0:a.features)||void 0===o?void 0:o.length)){const e=W(a,m);if(e){const t=U(e,n,i,s);if(t)return t}}if(!c||"all"===c||"all"===u){try{const t=yield(g=void 0,f=void 0,b=void 0,h=function*(){return J||V||(V=d.e("your-extensions_widgets_Custom-map-widget_src_runtime_uzbekistan_regions_backup_json").then(d.t.bind(d,2767,19)).then((e=>(J=e.default,J))).catch((()=>null)),V)},new(b||(b=Promise))((function(e,t){function a(e){try{r(h.next(e))}catch(e){t(e)}}function o(e){try{r(h.throw(e))}catch(e){t(e)}}function r(t){var r;t.done?e(t.value):(r=t.value,r instanceof b?r:new b((function(e){e(r)}))).then(a,o)}r((h=h.apply(g,f||[])).next())})));if(t&&t.features&&t.features.length>0){const a=[];for(const e of t.features)if(null==e?void 0:e.geometry){const t=U(e,n,i,s);t&&a.push(t)}if(0===a.length)return null;const o=[];for(const t of a)if(32642===(null===(r=t.spatialReference)||void 0===r?void 0:r.wkid)){const a=yield X(t,e);a&&o.push(a)}else o.push(t);if(0===o.length)return null;if(1===o.length)return o[0];const c=5;let d=o[0];for(let e=1;e<o.length;e+=c){const t=[d,...o.slice(e,e+c)];try{if(d=l.union(t),!d||!d.rings||0===d.rings.length)break}catch(t){console.warn(`[Custom-map-widget] Error union batch starting at ${e}:`,t);break}}return d&&d.rings&&d.rings.length>0?d:o[0]}}catch(e){console.warn("[Custom-map-widget] Error loading uzbekistan_regions_backup.json:",e)}return null}var g,f,b,h;{const e=B(t,u);if(e)return U(e,n,i)}return null},new((n=void 0)||(n=Promise))((function(e,t){function a(e){try{s(i.next(e))}catch(e){t(e)}}function l(e){try{s(i.throw(e))}catch(e){t(e)}}function s(t){var o;t.done?e(t.value):(o=t.value,o instanceof n?o:new n((function(e){e(o)}))).then(a,l)}s((i=i.apply(o,r||[])).next())}));var o,r,n,i};var Q=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};let ee=[];const te={1726267:"1726266",1726201:"1726264",1726202:"1726273",1726203:"1726280",1726204:"1726283",1726205:"1726262",1726206:"1726290",1726207:"1726290",1726208:"1726294",1726209:"1726277",1726261:"1727259",1726262:"1726292"},ae=(e,t)=>Q(void 0,void 0,void 0,(function*(){try{const a=String(e).trim(),o=te[a]||a,r=yield Q(void 0,void 0,void 0,(function*(){if(ee.length>0)return ee;try{const e=yield d.e("your-extensions_widgets_Custom-map-widget_src_runtime_tumanlanguage_json").then(d.t.bind(d,9061,19));return ee=e.default,ee}catch(e){return console.error("[Custom-map-widget] Error loading tumanlanguage.json:",e),[]}}));if(!r||0===r.length)return null;const n=(e=>{switch(e){case"uz-Cyrl":default:return"tuman_krl";case"uz-Latn":return"tuman_uzb";case"ru":return"tuman_rus";case"en":return"tuman_eng"}})(t);for(const e of r)if(e.district&&String(e.district)===o){const t=e[n];if(t&&t.trim())return t.trim()}if(o!==a)for(const e of r)if(e.district&&String(e.district)===a){const t=e[n];if(t&&t.trim())return t.trim()}for(const e of r)if(e.district&&String(e.district)){const t=String(e.district);if(t.includes(o)||o.includes(t)){const t=e[n];if(t&&t.trim())return t.trim()}if(o.length===t.length){let a=0;for(let e=0;e<o.length;e++)o[e]!==t[e]&&a++;if(1===a){const t=e[n];if(t&&t.trim())return t.trim()}}}return null}catch(e){return console.error("[Custom-map-widget] Error in getDistrictName:",e),null}})),oe=JSON.parse('[{"uz-Cyrl":"Ð¢Ð¾ÑˆÐºÐµÐ½Ñ‚ ÑˆÐ°Ò³Ð°Ñ€","uz-Latn":"Toshkent shahar","ru":"Ð“Ð¾Ñ€Ð¾Ð´ Ð¢Ð°ÑˆÐºÐµÐ½Ñ‚","region_soato":"1726","amcharts_id":"UZ-TK"},{"uz-Cyrl":"Ð¢Ð¾ÑˆÐºÐµÐ½Ñ‚ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Toshkent viloyati","ru":"Ð¢Ð°ÑˆÐºÐµÐ½Ñ‚ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1727","amcharts_id":"UZ-TO"},{"uz-Cyrl":"Ð¡Ð¸Ñ€Ð´Ð°Ñ€Ñ‘ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Sirdaryo viloyati","ru":"Ð¡Ñ‹Ñ€Ð´Ð°Ñ€ÑŒÐ¸Ð½ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1724","amcharts_id":"UZ-SI"},{"uz-Cyrl":"Ð–Ð¸Ð·Ð·Ð°Ñ… Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Jizzax viloyati","ru":"Ð”Ð¶Ð¸Ð·Ð°ÐºÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1708","amcharts_id":"UZ-JI"},{"uz-Cyrl":"Ð¡Ð°Ð¼Ð°Ñ€Ò›Ð°Ð½Ð´ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Samarqand viloyati","ru":"Ð¡Ð°Ð¼Ð°Ñ€ÐºÐ°Ð½Ð´ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1718","amcharts_id":"UZ-SA"},{"uz-Cyrl":"Ð¤Ð°Ñ€Ò“Ð¾Ð½Ð° Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Farg\'ona viloyati","ru":"Ð¤ÐµÑ€Ð³Ð°Ð½ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1730","amcharts_id":"UZ-FA"},{"uz-Cyrl":"ÐÐ°Ð¼Ð°Ð½Ð³Ð°Ð½ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Namangan viloyati","ru":"ÐÐ°Ð¼Ð°Ð½Ð³Ð°Ð½ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1714","amcharts_id":"UZ-NG"},{"uz-Cyrl":"ÐÐ½Ð´Ð¸Ð¶Ð¾Ð½ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Andijon viloyati","ru":"ÐÐ½Ð´Ð¸Ð¶Ð°Ð½ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1703","amcharts_id":"UZ-AN"},{"uz-Cyrl":"ÒšÐ°ÑˆÒ›Ð°Ð´Ð°Ñ€Ñ‘ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Qashqadaryo viloyati","ru":"ÐšÐ°ÑˆÐºÐ°Ð´Ð°Ñ€ÑŒÐ¸Ð½ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1710","amcharts_id":"UZ-QA"},{"uz-Cyrl":"Ð¡ÑƒÑ€Ñ…Ð¾Ð½Ð´Ð°Ñ€Ñ‘ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Surxondaryo viloyati","ru":"Ð¡ÑƒÑ€Ñ…Ð°Ð½Ð´Ð°Ñ€ÑŒÐ¸Ð½ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1722","amcharts_id":"UZ-SU"},{"uz-Cyrl":"Ð‘ÑƒÑ…Ð¾Ñ€Ð¾ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Buxoro viloyati","ru":"Ð‘ÑƒÑ…Ð°Ñ€ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1706","amcharts_id":"UZ-BU"},{"uz-Cyrl":"ÐÐ°Ð²Ð¾Ð¸Ð¹ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Navoiy viloyati","ru":"ÐÐ°Ð²Ð¾Ð¸Ð¹ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1712","amcharts_id":"UZ-NW"},{"uz-Cyrl":"Ð¥Ð¾Ñ€Ð°Ð·Ð¼ Ð²Ð¸Ð»Ð¾ÑÑ‚Ð¸","uz-Latn":"Xorazm viloyati","ru":"Ð¥Ð¾Ñ€ÐµÐ·Ð¼ÑÐºÐ°Ñ Ð¾Ð±Ð»Ð°ÑÑ‚ÑŒ","region_soato":"1733","amcharts_id":"UZ-XO"},{"uz-Cyrl":"ÒšÐ¾Ñ€Ð°Ò›Ð°Ð»Ð¿Ð¾Ò“Ð¸ÑÑ‚Ð¾Ð½ Ð ÐµÑÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ°ÑÐ¸","uz-Latn":"Qoraqalpogiston Respublikasi","ru":"Ð ÐµÑÐ¿ÑƒÐ±Ð»Ð¸ÐºÐ° ÐšÐ°Ñ€Ð°ÐºÐ°Ð»Ð¿Ð°ÐºÑÑ‚Ð°Ð½","region_soato":"1735","amcharts_id":"UZ-QR"}]');var re=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))},ne=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};const ie=new Map;const le=e=>e.replace(/[{}]/g,"").toUpperCase();var se=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};const ce=({mapRef:e,geoJSONData:a,districtGeoJSON:r,selectedRegion:n,selectedDistrict:i,selectionRevision:l,filters:s,filtersRevision:c,onShowPopup:d=(()=>{})})=>{const u=(0,t.useRef)(null),p=(0,t.useRef)(null),m=(0,t.useRef)(null),g=(0,t.useRef)(null),b=(0,t.useRef)(null),_=(0,t.useRef)(null),y=(0,t.useRef)(!1),[w,k]=(0,t.useState)(!1),[z,E]=(0,t.useState)(!1),j=(0,t.useRef)(null),C=(0,t.useRef)(null),S=(0,t.useRef)(null),N=(0,t.useRef)(null),L=(0,t.useRef)(null),I=(0,t.useRef)(null),M=(0,t.useRef)(null),P=(0,t.useRef)(new Map),D=(0,t.useRef)(null),R=(0,t.useRef)(!1),F=(0,t.useRef)(null),q=(0,t.useRef)(!1),H=(0,t.useRef)(d),J=(0,t.useRef)(s),V=(0,t.useRef)("");(0,t.useEffect)((()=>{H.current=d}),[d]),(0,t.useEffect)((()=>{J.current=s}),[s]);const{polygonsData:X,fetchPolygons:Q,refreshPolygons:ee}=(()=>{const[e,a]=(0,t.useState)(null),[o,r]=(0,t.useState)(!1),[n,i]=(0,t.useState)(null),l=(0,t.useRef)(""),s=(0,t.useCallback)(((e,t)=>T(void 0,void 0,void 0,(function*(){var o;if(!t)return a(null),r(!1),i(null),void(l.current="");const n=`${t}-${e.selectedYear||"all"}-${e.status||"all"}-${(null===(o=e.selectedTypeId)||void 0===o?void 0:o.id)||"all"}`;if(l.current!==n){l.current=n,r(!0),i(null);try{try{yield fetch(`${$}/api/ecology/cache/clear`,{method:"POST",headers:{accept:"application/json"}})}catch(e){console.warn("Failed to clear cache before GET request:",e)}const o=new URL(`${$}/api/ecology/geojson`);if(t){const e=t.length;4===e?o.searchParams.append("region",t):7===e?o.searchParams.append("district",t):10===e&&o.searchParams.append("mahalla_id",t)}if(e.selectedYear&&o.searchParams.append("year",e.selectedYear),e.status){const t=(s=e.status)?["tasdiqlangan","tasdiqlanmagan","tekshirilgan","jarayonda"].includes(s)?s:{1:"tasdiqlangan",2:"tasdiqlanmagan",3:"tekshirilgan",4:"jarayonda"}[s]||s:null;t&&o.searchParams.append("status",t)}e.selectedTypeId&&o.searchParams.append("tur",e.selectedTypeId.id.toString());const r=yield fetch(o.toString(),{method:"GET",headers:{accept:"application/json","Content-Type":"application/json"}});if(!r.ok)throw new Error(`API request failed: ${r.status} ${r.statusText}`);const n=yield r.json();a(n)}catch(e){const t=e instanceof Error?e.message:"Failed to fetch polygons";console.error("Error fetching polygons:",t),i(t),a(null),l.current=""}finally{r(!1)}var s}}))),[]),c=(0,t.useCallback)(((e,t)=>T(void 0,void 0,void 0,(function*(){l.current="",yield s(e,t)}))),[s]);return{polygonsData:e,loading:o,error:n,fetchPolygons:s,refreshPolygons:c}})(),te=(0,t.useRef)(0),ce=(0,t.useRef)(null),de=(0,t.useRef)(!1),ue=(0,t.useRef)(""),pe=(0,t.useRef)(null),me=(0,t.useRef)(null),ge=()=>se(void 0,void 0,void 0,(function*(){const e=_.current;return!!(m.current&&u.current&&e)&&(null!==ce.current&&(cancelAnimationFrame(ce.current),ce.current=null),new Promise((t=>{const a=()=>{var a;try{if(!S.current||!m.current||!u.current)return void t(!1);const{geometryEngine:o,Polygon:r,SpatialReference:n,Graphic:i}=S.current;null===(a=u.current)||void 0===a||a.extent,m.current.removeAll();const l=G(e,r,n,o);if(l&&m.current){const e=O(l,i);m.current.add(e)}te.current=Date.now(),de.current=!1,t(!0)}catch(e){de.current=!1,t(!1)}};ce.current=requestAnimationFrame((()=>{try{if(!S.current)return void Z().then((e=>{S.current=e,a()}));a()}catch(e){de.current=!1,t(!1)}}))})))}));(0,t.useEffect)((()=>{if(de.current&&_.current&&u.current&&m.current){const e=setTimeout((()=>{de.current&&ge()}),10);return()=>clearTimeout(e)}}),[n,i,l]),(0,t.useEffect)((()=>{var e;if(!u.current||!y.current)return;const t=localStorage.getItem("selectedSoato"),{region:o,district:n}=Y(t),i=Boolean(n);if(t&&"all"!==t&&!a)return;if(i&&!(null===(e=null==r?void 0:r.features)||void 0===e?void 0:e.length))return;const l=null===j.current&&null===C.current||""===j.current&&""===C.current,s=j.current!==o&&!l,c=C.current!==(n||null)&&!l;(l||s||c)&&(j.current=o,C.current=n||null,se(void 0,void 0,void 0,(function*(){try{S.current||(S.current=yield Z()),A();const e=yield K(S.current,a,r);if(!e){if(_.current=null,m.current&&m.current.removeAll(),u.current){const e=l;yield u.current.goTo({center:x.center,zoom:6},{duration:e?800:1200,easing:f})}return}if(_.current=e,!(yield ge()))return;const t=e.extent;if(t&&u.current){const e=localStorage.getItem("selectedSoato"),{region:a}=Y(e),o=e&&"all"!==e&&"all"!==a?1.2:1.1,r=t.expand(o),n=l;yield u.current.goTo(r,{duration:n?800:1200,easing:f}),u.current.zoom<5&&(yield u.current.goTo({zoom:5},{duration:n?600:800,easing:f})),yield ge()}}catch(e){}})))}),[n,i,a,r,l]),(0,t.useEffect)((()=>{let e=null,t=!1,a=null,o=null,r=null,n=!1,i=null,l=!1;const s=()=>se(void 0,void 0,void 0,(function*(){if(t)return;if(!u.current||!m.current||!_.current)return;const e=u.current.extent;if(!i||Math.abs(e.xmin-i.xmin)>.25*e.width||Math.abs(e.ymin-i.ymin)>.25*e.height||Math.abs(e.width-i.width)>.25*i.width||Math.abs(e.height-i.height)>.25*i.height){i=e.clone(),t=!0;try{yield ge()}finally{t=!1}}})),c=()=>{var r;return!!n||!!(u.current&&m.current&&_.current)&&(n=!0,i=(null===(r=u.current.extent)||void 0===r?void 0:r.clone())||null,s(),e=u.current.watch("extent",(()=>{l=!0,o&&clearTimeout(o),o=setTimeout((()=>{l=!1}),500),a&&clearTimeout(a),a=setTimeout((()=>{_.current&&!t&&u.current&&!l&&s()}),2e3)})),!0)};let d=0;return r=setInterval((()=>{d++,c()?r&&(clearInterval(r),r=null):d>=15&&r&&(clearInterval(r),r=null)}),2e3),c()&&r&&(clearInterval(r),r=null),()=>{r&&clearInterval(r),a&&clearTimeout(a),o&&clearTimeout(o),e&&e.remove(),null!==ce.current&&(cancelAnimationFrame(ce.current),ce.current=null),N.current&&(N.current.remove(),N.current=null),n=!1,i=null}}),[n,i,l]),(0,t.useEffect)((()=>{var e;if(!w||!u.current||!g.current)return;R.current=!1,F.current=null,q.current=!1,D.current&&(clearTimeout(D.current),D.current=null);const t=()=>se(void 0,void 0,void 0,(function*(){var e,t;const a=J.current,o=a.selectedSoato;if(!o)return null===(e=g.current)||void 0===e||e.removeAll(),void(ue.current="");const r=`${o}-${a.selectedYear||"all"}-${a.status||"all"}-${(null===(t=a.selectedTypeId)||void 0===t?void 0:t.id)||"all"}`;if(ue.current!==r){ue.current=r,pe.current&&clearTimeout(pe.current);try{yield Q(a,o)}catch(e){ue.current=""}}})),a=`${s.selectedSoato||""}-${s.selectedYear||""}-${s.status||""}-${(null===(e=s.selectedTypeId)||void 0===e?void 0:e.id)||""}`;V.current!==a&&(V.current=a,t());const o=e=>{(["selectedYear","selectedSoato","selectedDistrict","selectedTypeId","status","customLocal","authToken","token"].includes(e.key||"")||null===e.key)&&(J.current=s,t())};return window.addEventListener("storage",o),()=>{window.removeEventListener("storage",o),pe.current&&clearTimeout(pe.current)}}),[n,i,l,s.selectedSoato,s.selectedYear,s.status,s.selectedTypeId,Q,w]),(0,t.useEffect)((()=>{var e,t;me.current&&(me.current(),me.current=null,E(!1));const a=J.current;a.selectedSoato?X?u.current&&g.current&&S.current&&(R.current=!1,((e,t,a,o,r,n,i,l)=>{ne(void 0,void 0,void 0,(function*(){var s,c,d,u,p,m,g,f,b,v,_;if(!e)return void(null===(s=a.current)||void 0===s||s.removeAll());if(!n.selectedSoato)return void(null===(c=a.current)||void 0===c||c.removeAll());if(!t.current||!a.current||!o.current)return;const{Polygon:y,SpatialReference:w,Graphic:k}=o.current,z=(null===(d=t.current)||void 0===d?void 0:d.zoom)||x.zoom,E=`${n.selectedSoato}-${n.selectedYear||"all"}-${n.status||"all"}-${(null===(u=n.selectedTypeId)||void 0===u?void 0:u.id)||"all"}-${z}`,j=ie.get(E);if(j&&j.featureCount===e.features.length)return null===(p=a.current)||void 0===p||p.removeAll(),void(null===(m=a.current)||void 0===m||m.addMany(j.graphics));const C=!n.selectedSoato||"all"===n.selectedSoato,S=e.features;if(C&&S.length>200){i(!0);let e=!1;return l.current=()=>{e=!0,i(!1)},void((e,t,a,o,r,n,i,l,s,c)=>{ne(void 0,void 0,void 0,(function*(){var d,u,p,m,g,f,b;null===(d=s.current)||void 0===d||d.removeAll();const v=[];for(let a=0;a<e.length;a+=200){if(o())return;const r=e.slice(a,Math.min(a+200,e.length));for(const e of r){if(o())return;if(e.geometry&&e.geometry.coordinates)try{const a=null!==(g=null!==(p=null===(u=e.properties)||void 0===u?void 0:u.tur)&&void 0!==p?p:null===(m=e.properties)||void 0===m?void 0:m.type)&&void 0!==g?g:null,o=U(e,n,i);if(o){const r=new l({geometry:o,attributes:{__ecology:!0,properties:e.properties},symbol:h(t,c.current,a)});v.push(r)}}catch(e){}}v.length>0&&s.current&&(s.current.addMany(v),v.length=0),a+200<e.length&&(yield new Promise((e=>{requestAnimationFrame((()=>{requestAnimationFrame(e)}))})))}if(!o()&&s.current){const t=(null===(b=null===(f=s.current)||void 0===f?void 0:f.graphics)||void 0===b?void 0:b.toArray())||[];ie.set(a,{graphics:t,timestamp:Date.now(),featureCount:e.length}),null==r||r()}}))})(S,z,E,(()=>e),(()=>{i(!1)}),y,w,k,a,r)}null===(g=a.current)||void 0===g||g.removeAll();const N=[];try{const t=(e,t)=>ne(void 0,void 0,void 0,(function*(){var t,a,o,n;const i=[];for(let l=0;l<e.length;l++){const s=e[l];if(s.geometry&&s.geometry.coordinates)try{const e=null!==(n=null!==(a=null===(t=s.properties)||void 0===t?void 0:t.tur)&&void 0!==a?a:null===(o=s.properties)||void 0===o?void 0:o.type)&&void 0!==n?n:null,l=U(s,y,w);if(!l)continue;const c=new k({geometry:l,attributes:{__ecology:!0,properties:s.properties},symbol:h(z,r.current,e)});i.push(c)}catch(e){console.warn("Error processing polygon:",e)}}return i})),a=100,o=[];for(let t=0;t<e.features.length;t+=a)o.push(e.features.slice(t,t+a));const n=o.map(((e,o)=>t(e,o*a))),i=yield Promise.all(n);for(const e of i)N.push(...e)}catch(t){console.error("Error in batch processing:",t);for(const t of e.features)if(t.geometry&&t.geometry.coordinates)try{const e=null!==(_=null!==(b=null===(f=t.properties)||void 0===f?void 0:f.tur)&&void 0!==b?b:null===(v=t.properties)||void 0===v?void 0:v.type)&&void 0!==_?_:null,a=U(t,y,w);if(!a)continue;const o=new k({geometry:a,attributes:{__ecology:!0,properties:t.properties},symbol:h(z,r.current,e)});N.push(o)}catch(e){}}if(N.length>0&&(ie.set(E,{graphics:N.slice(),timestamp:Date.now(),featureCount:e.features.length}),ie.size>5)){const e=ie.keys().next().value;ie.delete(e)}N.length>0&&a.current&&a.current.addMany(N)}))})(X,u,g,S,P,a,E,me)):null===(t=g.current)||void 0===t||t.removeAll():null===(e=g.current)||void 0===e||e.removeAll()}),[X,s.selectedSoato,s.selectedYear,s.status,s.selectedTypeId]),(0,t.useEffect)((()=>{if(!w||!u.current||!g.current)return;const t=()=>{u.current&&g.current&&(N.current&&(N.current.remove(),N.current=null),R.current=!1,D.current&&(clearTimeout(D.current),D.current=null),N.current=((e,t,a,o,r,n,i,l,s,c)=>e.current&&t.current?e.current.on("click",(o=>re(void 0,void 0,void 0,(function*(){i.current||(l.current&&clearTimeout(l.current),l.current=setTimeout((()=>re(void 0,void 0,void 0,(function*(){var l,d,u,p;i.current=!0;const m=setTimeout((()=>{i.current&&(i.current=!1)}),3e3);try{if(!e.current)return clearTimeout(m),void(i.current=!1);const g=null===(l=(yield e.current.hitTest(o)).results)||void 0===l?void 0:l.find((e=>{var t,a;return null===(a=null===(t=e.graphic)||void 0===t?void 0:t.attributes)||void 0===a?void 0:a.__ecology}));if(!(null===(d=null==g?void 0:g.graphic)||void 0===d?void 0:d.geometry))return requestAnimationFrame((()=>{var a,o,n;try{if(t.current&&e.current){const i=e.current.zoom||x.zoom,l=t.current.graphics.toArray();for(const e of l)if(null===(a=e.attributes)||void 0===a?void 0:a.__ecology){const t=e.attributes.properties||{},a=null!==(n=null!==(o=t.tur)&&void 0!==o?o:t.type)&&void 0!==n?n:null;e.symbol=h(i,r.current,a)}s.current=null}}catch(e){}})),clearTimeout(m),void(i.current=!1);const b=g.graphic.attributes.properties||{},_=b.gid,y=(null!==(u=b.tur)&&void 0!==u||b.type,a.current);if(!y)return clearTimeout(m),void(i.current=!1);const w=o.mapPoint,k=e.current.toScreen(w),z=y.getBoundingClientRect(),E=k.x-z.left,j=k.y-z.top,C=b.region?String(b.region):null,S=C?oe.find((e=>e.region_soato===C)):null,N=localStorage.getItem("customLocal")||"ru",L="uz-Cyrl"===N?"uz-Cyrl":"uz-Latn"===N?"uz-Latn":"ru";let I="";if(b.globalid){const e=String(b.globalid);I=e.startsWith("{")&&e.endsWith("}")?e:`{${e}}`}else if(b.GlobalID){const e=String(b.GlobalID);I=e.startsWith("{")&&e.endsWith("}")?e:`{${e}}`}else b.gid&&(I=`{${b.gid}}`);const M={viloyat:S?S[L]:b.viloyat||"",tuman:b.tuman||"",mfy:b.mfy||"",maydon:null!==(p=b.maydon)&&void 0!==p?p:0,tur:void 0!==b.tur&&null!==b.tur?String(b.tur):"",latitude:b.latitude?parseFloat(String(b.latitude)):void 0,longitude:b.longitude?parseFloat(String(b.longitude)):void 0,yil:b.sana||b.yil||"","Yer toifa":b.yer_toifa||b["Yer toifa"]||"",natija:b.natija||"",tavsif:b.tavsif||b.natija||"",GlobalID:I,Inspektor:b.inspektor||b.Inspektor||b.tekshirish||"",inspektor:b.inspektor||b.Inspektor||b.tekshirish||"",Jarima_qollanildi:void 0!==b.jarima_qollanildi?String(b.jarima_qollanildi):b.Jarima_qollanildi||"",jarima_qollanildi:void 0!==b.jarima_qollanildi?b.jarima_qollanildi:b.Jarima_qollanildi?parseFloat(String(b.Jarima_qollanildi)):void 0,Hisoblangan_zarar:void 0!==b.hisoblangan_zarar?String(b.hisoblangan_zarar):b.Hisoblangan_zarar||"",hisoblangan_zarar:void 0!==b.hisoblangan_zarar?b.hisoblangan_zarar:b.Hisoblangan_zarar?parseFloat(String(b.Hisoblangan_zarar)):void 0,Holat_bartaraf_etildi:b.holat_bartaraf_etildi||b.Holat_bartaraf_etildi||"",holat_bartaraf_etildi:b.holat_bartaraf_etildi||b.Holat_bartaraf_etildi||"",buzilish:b.buzilish||"",Tekshiruv_natijasi:b.Tekshiruv_natijasi||b.tekshirish||"",gid:null!=b.gid?Number(b.gid):void 0,globalid:b.globalid||I.replace(/[{}]/g,""),sana:b.sana,yer_toifa:b.yer_toifa,district:b.district,region:b.region,mahalla_id:b.mahalla_id,tekshirish:b.tekshirish};n(M,{x:E,y:j});try{window.dispatchEvent(new CustomEvent("status-statistics-refresh")),console.log("Dispatched status-statistics-refresh event on polygon click")}catch(e){console.warn("Failed to dispatch status-statistics-refresh event:",e)}b.district&&ae(String(b.district),L).then((e=>{if(e){const t=Object.assign(Object.assign({},M),{tuman:e});n(t,{x:E,y:j})}})).catch((()=>{})),requestAnimationFrame((()=>{try{if(t.current&&e.current){const a=e.current.zoom||x.zoom;let o=null;const n=t.current.graphics.toArray(),l=100,d=t=>{var u,p,b;const y=Math.min(t+l,n.length);for(let e=t;e<y;e++){const t=n[e];if(null===(u=t.attributes)||void 0===u?void 0:u.__ecology){const e=t.attributes.properties||{},n=e.gid,i=null!==(b=null!==(p=e.tur)&&void 0!==p?p:e.type)&&void 0!==b?b:null;if(null==_||n!==_&&String(n)!==String(_))t.symbol=h(a,r.current,i);else if(t.symbol=v(i),t.geometry){const e=t.geometry.extent;e&&(o=o?o.union(e):e)}}}if(y<n.length)requestAnimationFrame((()=>d(y)));else{const t=s.current!==_;if((o||g.graphic.geometry)&&t&&!c.current){const t=o||g.graphic.geometry.extent;t&&e.current&&(c.current=!0,s.current=_,e.current.goTo(t.expand(1.2),{duration:1e3,easing:f}).then((()=>{c.current=!1})).catch((()=>{c.current=!1})))}else t&&(s.current=_);clearTimeout(m),i.current=!1}};d(0)}else clearTimeout(m),i.current=!1}catch(e){clearTimeout(m),i.current=!1}}))}catch(e){clearTimeout(m),i.current=!1}}))),150))})))):null)(u,g,e,0,P,H.current,R,D,F,q))},a=g.current.graphics.length>0;if(J.current.selectedSoato&&X&&!a){const e=setInterval((()=>{g.current&&g.current.graphics.length>0&&(clearInterval(e),t())}),100),a=setTimeout((()=>{clearInterval(e),t()}),2e3);return()=>{clearInterval(e),clearTimeout(a),N.current&&(N.current.remove(),N.current=null),D.current&&(clearTimeout(D.current),D.current=null),R.current=!1}}return t(),()=>{N.current&&(N.current.remove(),N.current=null),D.current&&(clearTimeout(D.current),D.current=null),R.current=!1}}),[w,n,i,l,X]),(0,t.useEffect)((()=>{if(!w||!u.current||!g.current)return;const e=()=>se(void 0,void 0,void 0,(function*(){yield((e,t,a,o)=>{return r=void 0,n=void 0,l=function*(){if(!e.current||!t.current)return;const a=localStorage.getItem("selectedId");if(!a)return;const r=a.startsWith("{")&&a.endsWith("}")?a:`{${a}}`,n=le(a);if(!t.current||!e.current)return;let i=null,l=null;if(t.current.graphics.forEach((e=>{var t;if(null===(t=e.attributes)||void 0===t?void 0:t.__ecology){const t=e.attributes.properties||{},a=t.gid;if(null!=a&&String(a).toUpperCase()===n&&(i=e,e.geometry)){const t=e.geometry.extent;t&&(l=l?l.union(t):t)}const o=t.GlobalID||t.globalid;if(o){const t=String(o),a=le(t);if((t===r||t.toUpperCase()===r.toUpperCase()||a===n)&&(i||(i=e),e.geometry)){const t=e.geometry.extent;t&&(l=l?l.union(t):t)}}}})),i&&l){const a=e.current.zoom||x.zoom;t.current.graphics.forEach((e=>{var t,i,l;if(null===(t=e.attributes)||void 0===t?void 0:t.__ecology){const t=e.attributes.properties||{},s=null!==(l=null!==(i=t.tur)&&void 0!==i?i:t.type)&&void 0!==l?l:null,c=t.gid,d=t.GlobalID||t.globalid;let u=!1;if(null!=c&&String(c).toUpperCase()===n&&(u=!0),!u&&d){const e=String(d),t=le(e);(e===r||e.toUpperCase()===r.toUpperCase()||t===n)&&(u=!0)}e.symbol=u?v(s):h(a,o.current,s)}}));try{yield e.current.goTo(l.expand(1.2),{duration:1e3,easing:f})}catch(e){}}},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{s(l.next(e))}catch(e){t(e)}}function o(e){try{s(l.throw(e))}catch(e){t(e)}}function s(t){var r;t.done?e(t.value):(r=t.value,r instanceof i?r:new i((function(e){e(r)}))).then(a,o)}s((l=l.apply(r,n||[])).next())}));var r,n,i,l})(u,g,0,P)}));e();let t=localStorage.getItem("selectedId");const a=setInterval((()=>{const a=localStorage.getItem("selectedId");a!==t&&(t=a,e())}),3e3),o=t=>{"selectedId"!==t.key&&null!==t.key||e()};return window.addEventListener("storage",o),()=>{clearInterval(a),window.removeEventListener("storage",o)}}),[w]),(0,t.useEffect)((()=>{if(!e.current||y.current)return;if(u.current)return;let t=null;return se(void 0,void 0,void 0,(function*(){try{const[n,i,l]=yield(0,o.loadArcGISJSAPIModules)(["esri/Map","esri/views/MapView","esri/layers/GraphicsLayer"]);S.current=yield Z();let s="hybrid";try{const e=localStorage.getItem("custom-map-widget-basemap");e&&(s=e)}catch(e){}const c=new n({basemap:s});p.current=c;const d=new l({opacity:1,visible:!0,title:"Region Mask"});c.add(d),m.current=d;const v=new l({opacity:.7,visible:!0,title:"Ecology Polygons"});c.add(v),g.current=v,t=new i({container:e.current,map:c,center:x.center,zoom:x.zoom,minZoom:6,maxZoom:20,ui:{components:[]}}),t.when((()=>se(void 0,void 0,void 0,(function*(){u.current=t,y.current=!0,M.current=Math.round(2*t.zoom)/2,t.constraints={minZoom:6,maxZoom:20};try{if("true"===localStorage.getItem("custom-map-widget-imageservice")){const[e]=yield(0,o.loadArcGISJSAPIModules)(["esri/layers/ImageryLayer"]),t=new e({url:"https://sgm.uzspace.uz/image/rest/services/Respublika_maxar_2025_yili/ImageServer",opacity:.8,title:"Kartografik asos"});p.current.layers.add(t,0),b.current=t}}catch(e){}t.on("double-click",(e=>{e.stopPropagation()})),L.current&&L.current.remove(),L.current=t.watch("zoom",(e=>{e<6&&(null==t||t.goTo({zoom:6},{duration:200,easing:f}).catch((()=>{})));const a=Math.round(2*e)/2;null!==M.current&&Math.abs(a-M.current)<.5||(I.current&&clearTimeout(I.current),I.current=setTimeout((()=>{if(g.current&&u.current){const e=Math.round(2*u.current.zoom)/2;if(null!==M.current&&Math.abs(e-M.current)<.5)return;M.current=e,requestAnimationFrame((()=>{if(!g.current)return;const t=g.current.graphics.toArray();let a=0;const o=()=>{var r,n,i;const l=Math.min(a+50,t.length);for(let o=a;o<l;o++){const a=t[o];if(null===(r=a.attributes)||void 0===r?void 0:r.__ecology){const t=a.symbol;if("picture-fill"===(null==t?void 0:t.type)){const t=a.attributes.properties||{},o=null!==(i=null!==(n=t.tur)&&void 0!==n?n:t.type)&&void 0!==i?i:null;a.symbol=h(e,P.current,o)}}}a=l,a<t.length&&requestAnimationFrame(o)};o()}))}}),1500))}));new Promise((e=>{c.basemap?c.basemap.when((()=>e())):e()})).then((()=>se(void 0,void 0,void 0,(function*(){yield se(void 0,void 0,void 0,(function*(){var e,t;if(m.current&&S.current)try{const{geometryEngine:o,Polygon:n,SpatialReference:i,Graphic:l}=S.current,s=localStorage.getItem("selectedSoato"),{region:c,district:d}=Y(s),p=d;let g=null;if(p&&(null===(e=null==r?void 0:r.features)||void 0===e?void 0:e.length)){const e=W(r,p);e&&(g=U(e,n,i,S.current.webMercatorUtils))}if(g||s&&"all"!==s&&"all"!==c){if(a){const e=B(a,c);e&&(g=U(e,n,i))}}else g=yield K(S.current,a,r);if(g){_.current=g,m.current.removeAll(),null===(t=u.current)||void 0===t||t.extent;const e=G(g,n,i,o);if(e){const t=O(e,l);m.current.add(t)}if(u.current&&g){const e=g.extent;if(e){const t=!s||"all"===s,a=t?1.1:1.2;yield u.current.goTo(e.expand(a),{duration:1e3,easing:f}),!t&&u.current&&u.current.zoom<5&&(yield u.current.goTo({zoom:5},{duration:600,easing:f}))}}}}catch(e){}})),u.current&&(yield u.current.when(),k(!0))})))),a&&(j.current="")})))).catch((()=>{setTimeout((()=>k(!0)),2e3)}))}catch(e){}})),()=>{t&&(N.current&&(N.current.remove(),N.current=null),L.current&&(L.current.remove(),L.current=null),D.current&&(clearTimeout(D.current),D.current=null),I.current&&(clearTimeout(I.current),I.current=null),R.current=!1,t.destroy(),u.current=null,y.current=!1)}}),[a,e]);const fe=e=>se(void 0,void 0,void 0,(function*(){var t,a,o,r,n;const i=u.current;if(!i)return;const l=null!==(t=i.zoom)&&void 0!==t?t:x.zoom,s=e>0?"maxZoom":"minZoom",c=e>0?Math.min(null!==(o=null===(a=i.constraints)||void 0===a?void 0:a[s])&&void 0!==o?o:20,l+1):Math.max(null!==(n=null===(r=i.constraints)||void 0===r?void 0:r[s])&&void 0!==n?n:6,l-1);try{yield i.goTo({zoom:c},{duration:600,easing:f})}catch(e){}}));(0,t.useEffect)((()=>()=>{I.current&&clearTimeout(I.current),L.current&&L.current.remove(),D.current&&clearTimeout(D.current),null!==ce.current&&(cancelAnimationFrame(ce.current),ce.current=null),P.current.clear(),A(),R.current=!1,b.current&&p.current&&(p.current.layers.remove(b.current),b.current=null)}),[]);const be=(0,t.useCallback)((()=>se(void 0,void 0,void 0,(function*(){ue.current="",V.current="";const e=J.current,t=e.selectedSoato;t&&(yield ee(e,t))}))),[ee]);return{handleZoomIn:()=>fe(1),handleZoomOut:()=>fe(-1),isMapReady:w,isProcessingRegion:z,changeBasemap:e=>se(void 0,void 0,void 0,(function*(){p.current&&(p.current.basemap=e)})),toggleImageServiceLayer:e=>se(void 0,void 0,void 0,(function*(){if(p.current)try{if(e)if(b.current)b.current.visible=!0;else{const[e]=yield(0,o.loadArcGISJSAPIModules)(["esri/layers/ImageryLayer"]),t=new e({url:"https://sgm.uzspace.uz/image/rest/services/Respublika_maxar_2025_yili/ImageServer",opacity:.8,title:"Kartografik asos"});p.current.layers.add(t,0),b.current=t}else b.current&&(b.current.visible=!1)}catch(e){console.error("Error toggling ImageService layer:",e)}})),refreshMap:be}};var de=d(3379),ue=d.n(de),pe=d(7795),me=d.n(pe),ge=d(569),fe=d.n(ge),be=d(3565),he=d.n(be),ve=d(9216),_e=d.n(ve),ye=d(4589),xe=d.n(ye),we=d(5632),ke={};ke.styleTagTransform=xe(),ke.setAttributes=he(),ke.insert=fe().bind(null,"head"),ke.domAPI=me(),ke.insertStyleElement=_e(),ue()(we.Z,ke),we.Z&&we.Z.locals&&we.Z.locals;var ze=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};const Ee="https://api-test.spacemc.uz",je=(0,t.memo)((({isOpen:e,onClose:a,polygonData:o,position:r,uploadedFiles:n=[],photos:i=[],onEdit:l,mapFrameRef:c})=>{const{t:d,locale:u}=s(),p=(0,t.useRef)(null),[m,g]=(0,t.useState)(!1),[f,b]=(0,t.useState)(null),[h,v]=(0,t.useState)([]),[_,y]=(0,t.useState)(!1),x=(0,t.useCallback)((e=>{if(!e&&0!==e)return"â€”";const t=String(e).trim(),a=d("modal.fields.result.options.approved"),o=d("modal.fields.result.options.rejected"),r=d("modal.fields.result.options.review");return"1"===t?a:"2"===t?o:t===a||t===o||t===r?t:t||"â€”"}),[d]),w=()=>{if(!(()=>{try{return!0}catch(e){return!1}})())return!1;const e=null==o?void 0:o.tur;return null==e||4!==Number(e)};return(0,t.useEffect)((()=>{if(!e||!p.current)return;const t=p.current,a=()=>(null==c?void 0:c.current)||t.offsetParent||t.parentElement||t.closest(".map-container"),o=(e,t,a)=>Math.max(t,Math.min(a,e)),n=()=>{const e=a();if(!e)return;const n=e.clientWidth,i=e.clientHeight;if(!n||!i)return;const l=n<520?10:16,s=i<520?10:16,c=m?2:s,d=Math.max(0,n-2*l),u=Math.max(0,i-2*s),p=Math.min(420,d),g=Math.max(140,i-c-16),f=Math.min(350,g),b=u<420;if(t.setAttribute("data-compact-y",b?"1":"0"),m)return t.style.left="auto",t.style.right="2px",t.style.top=`${c}px`,t.style.height=`${Math.max(0,i-c-16)}px`,t.style.width=`${Math.min(420,Math.max(0,n-4))}px`,void(t.style.maxHeight="none");if(!r)return;t.style.width=`${p}px`,t.style.maxHeight="none",t.style.height=`${f}px`,t.style.maxHeight="none";let h=r.x,v=r.y;h=o(h,l,n-p-l),v=o(v,c,i-f-16),t.style.left=`${h}px`,t.style.right="auto",t.style.top=`${v}px`};n();const i=new ResizeObserver((()=>requestAnimationFrame(n))),l=a();return l&&i.observe(l),window.addEventListener("resize",n),()=>{i.disconnect(),window.removeEventListener("resize",n)}}),[e,r,m,c]),(0,t.useEffect)((()=>{e||(g(!1),b(null))}),[e]),(0,t.useEffect)((()=>()=>{h.forEach((e=>{e.url.startsWith("blob:")&&URL.revokeObjectURL(e.url)}))}),[h]),(0,t.useEffect)((()=>{e&&(null==o?void 0:o.district)?ae(String(o.district),u).then((e=>{b(e||o.tuman||null)})).catch((()=>{b(o.tuman||null)})):e&&(null==o?void 0:o.tuman)?b(o.tuman):b(null)}),[e,null==o?void 0:o.district,null==o?void 0:o.tuman,u]),(0,t.useEffect)((()=>{e&&o?ze(void 0,void 0,void 0,(function*(){try{yield fetch(`${Ee}/api/ecology/cache/clear`,{method:"POST",headers:{accept:"application/json"}})}catch(e){console.warn("Failed to clear cache when popup opens:",e)}let e=null;if((null==o?void 0:o.globalid)?e=String(o.globalid).replace(/[{}]/g,""):(null==o?void 0:o.GlobalID)&&(e=String(o.GlobalID).replace(/[{}]/g,"")),e){y(!0);try{const t=`{${e.toUpperCase()}}`,a=encodeURIComponent(t),o=`${Ee}/api/ecology/file/${a}`;console.log("Fetching image from API:",o),console.log("GlobalID:",t);let r="",n=`image-${e}`;try{const e=yield fetch(o,{method:"HEAD",headers:{accept:"application/json"}});if(e.ok){r=e.headers.get("content-type")||"";const t=e.headers.get("content-disposition");if(t){const e=t.match(/filename[^;=\n]*=((['"]).*?\2|[^;\n]*)/);e&&e[1]&&(n=e[1].replace(/['"]/g,""))}}}catch(e){console.warn("HEAD request failed, using default values:",e)}let i="image";r&&(r.startsWith("image/")?i="image":r.startsWith("video/")?i="video":(r.includes("pdf")||r.includes("document"))&&(i="document")),console.log("Image URL:",o),console.log("Content-Type:",r||"unknown"),console.log("File type:",i),v([{url:o,name:n,type:i,size:void 0}])}catch(e){console.error("Error loading files:",e),v([])}finally{y(!1)}}else v([])})):v([])}),[e,o]),e&&o?t.default.createElement(t.default.Fragment,null,!m&&t.default.createElement("div",{className:"map-popup-overlay",onClick:a}),t.default.createElement("div",{ref:p,className:"map-popup "+(m?"map-popup--sidebar":""),onWheelCapture:e=>e.stopPropagation(),onTouchMoveCapture:e=>e.stopPropagation()},t.default.createElement("div",{className:"map-popup__header"},t.default.createElement("div",{className:"map-popup__title"},d("popup.title")),t.default.createElement("div",{className:"map-popup__header-buttons"},t.default.createElement("button",{type:"button",className:"map-popup__toggle-sidebar","aria-label":"Toggle sidebar",onClick:()=>g(!m)},t.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("g",{opacity:"0.4"},t.default.createElement("path",{d:"M4 6H20M4 12H20M4 18H20",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})))),t.default.createElement("button",{type:"button",className:"map-popup__close","aria-label":d("modal.close"),onClick:a},t.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("g",{opacity:"0.4"},t.default.createElement("path",{d:"M17.657 17.657L12.0001 12.0001M12.0001 12.0001L6.34326 6.34326M12.0001 12.0001L17.657 6.34326M12.0001 12.0001L6.34326 17.657",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})))))),t.default.createElement("div",{className:"map-popup__body"},t.default.createElement("div",{className:"map-popup__section"},t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.viloyat")),t.default.createElement("span",{className:"map-popup__value"},o.viloyat||"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.tuman")),t.default.createElement("span",{className:"map-popup__value"},f||(o.tuman&&o.tuman.trim()?o.tuman:o.district?String(o.district):"â€”"))),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.mfy")),t.default.createElement("span",{className:"map-popup__value"},o.mfy||"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.maydon")),t.default.createElement("span",{className:"map-popup__value"},o.maydon?`${o.maydon}`:"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.tur")),t.default.createElement("span",{className:"map-popup__value"},(()=>{const e=o.tur;if(null==e)return"â€”";const t=String(e).trim();return["0","1","2","3","4"].includes(t)?d(`popup.fields.typeDescriptions.${t}`):t||"â€”"})())),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.latitude")),t.default.createElement("span",{className:"map-popup__value"},o.latitude?`${o.latitude}`:"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.longitude")),t.default.createElement("span",{className:"map-popup__value"},o.longitude?`${o.longitude}`:"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.yil")),t.default.createElement("span",{className:"map-popup__value"},o.yil||"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.yerToifa")),t.default.createElement("span",{className:"map-popup__value"},o["Yer toifa"]||"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.tavsif")),t.default.createElement("span",{className:"map-popup__value"},o.tavsif||o.natija||"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.globalId")),t.default.createElement("span",{className:"map-popup__value"},void 0!==o.globalid&&null!==o.globalid?`[${String(o.globalid).replace(/[{}]/g,"")}]`:o.GlobalID?`[${o.GlobalID.replace(/[{}]/g,"")}]`:void 0!==o.gid&&null!==o.gid?`[${o.gid}]`:"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.inspektor")),t.default.createElement("span",{className:"map-popup__value"},o.inspektor||o.Inspektor||"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.jarima")),t.default.createElement("span",{className:"map-popup__value"},void 0!==o.jarima_qollanildi&&null!==o.jarima_qollanildi?String(o.jarima_qollanildi):o.Jarima_qollanildi||"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.zarar")),t.default.createElement("span",{className:"map-popup__value"},void 0!==o.hisoblangan_zarar&&null!==o.hisoblangan_zarar?String(o.hisoblangan_zarar):o.Hisoblangan_zarar||"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.holat")),t.default.createElement("span",{className:"map-popup__value"},o.holat_bartaraf_etildi||o.Holat_bartaraf_etildi||"â€”")),t.default.createElement("div",{className:"map-popup__field"},t.default.createElement("span",{className:"map-popup__label"},d("popup.fields.tekshiruvNatijasi")),t.default.createElement("span",{className:"map-popup__value"},x(o.tekshirish||o.Tekshiruv_natijasi)))),t.default.createElement("div",{className:"map-popup__section"},t.default.createElement("button",{type:"button",className:"map-popup__edit-button "+(w()?"":"map-popup__edit-button--disabled"),onClick:()=>ze(void 0,void 0,void 0,(function*(){if(w()&&l){try{yield fetch(`${Ee}/api/ecology/cache/clear`,{method:"POST",headers:{accept:"application/json"}})}catch(e){console.warn("Failed to clear cache before edit:",e)}l(),a()}})),disabled:!w(),title:w()?"":d("popup.errors.noPermission")},t.default.createElement("svg",{className:"map-popup__edit-icon",width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M6.94129 15.7273L2.5 17.5L4.27267 13.0587M6.94129 15.7273L16.1704 6.49819M6.94129 15.7273L6.58623 13.4132L4.27267 13.0587M4.27267 13.0587L13.5018 3.82956M16.1704 6.49819L13.5018 3.82956M16.1704 6.49819L16.999 5.66957C17.7359 4.93265 17.7359 3.73786 16.999 3.00094C16.2621 2.26402 15.0673 2.26402 14.3304 3.00094L13.5018 3.82956",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),d("popup.buttons.editInfo"))),_&&t.default.createElement("div",{className:"map-popup__section"},t.default.createElement("div",{className:"map-popup__loading-files"},"Ð—Ð°Ð³Ñ€ÑƒÐ·ÐºÐ° Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ...")),!_&&h.length>0&&t.default.createElement("div",{className:"map-popup__section map-popup__photos-section"},t.default.createElement("div",{className:"map-popup__section-title"},"Ð˜Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ðµ"),t.default.createElement("div",{className:"map-popup__photos"},h.map(((e,a)=>t.default.createElement("div",{key:a,className:"map-popup__photo-item"},t.default.createElement("img",{src:e.url,alt:e.name,className:"map-popup__photo-image",onError:t=>{console.error("Error loading image:",e.url,"Type:",e.type),t.target.style.display="none"},onLoad:()=>{console.log("Image loaded successfully:",e.url,"Type:",e.type)}})))))),n.length>0&&t.default.createElement("div",{className:"map-popup__section"},t.default.createElement("div",{className:"map-popup__section-title"},d("popup.files.title")),t.default.createElement("div",{className:"map-popup__files"},n.map(((e,a)=>t.default.createElement("div",{key:a,className:"map-popup__file-item"},t.default.createElement("svg",{className:"map-popup__file-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.default.createElement("path",{d:"M14 2V8H20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),t.default.createElement("div",{className:"map-popup__file-details"},t.default.createElement("div",{className:"map-popup__file-name"},e.name),t.default.createElement("div",{className:"map-popup__file-size"},(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]})(e.size)))))))),i.length>0&&t.default.createElement("div",{className:"map-popup__section map-popup__photos-section"},t.default.createElement("div",{className:"map-popup__photos"},i.map(((e,a)=>t.default.createElement("div",{key:a,className:"map-popup__photo-item"},t.default.createElement("img",{src:e.url,alt:`Photo ${a+1}`,className:"map-popup__photo-image",onError:e=>{e.target.style.display="none"}}),t.default.createElement("div",{className:"map-popup__photo-timestamp"},e.timestamp))))))))):null}));var Ce=d(800),Se=d(3325),Ne={};Ne.styleTagTransform=xe(),Ne.setAttributes=he(),Ne.insert=fe().bind(null,"head"),Ne.domAPI=me(),Ne.insertStyleElement=_e(),ue()(Se.Z,Ne),Se.Z&&Se.Z.locals&&Se.Z.locals;var Le=d(9895),Ie={};Ie.styleTagTransform=xe(),Ie.setAttributes=he(),Ie.insert=fe().bind(null,"head"),Ie.domAPI=me(),Ie.insertStyleElement=_e(),ue()(Le.Z,Ie),Le.Z&&Le.Z.locals&&Le.Z.locals;const Me=({value:e,options:a,onChange:o,placeholder:r,className:n=""})=>{const[i,l]=(0,t.useState)(!1),[s,c]=(0,t.useState)(-1),d=(0,t.useRef)(null),u=(0,t.useRef)(null),p=e||r||a[0]||"",m=(0,t.useCallback)((()=>{l((e=>!e)),c(-1)}),[]),g=(0,t.useCallback)(((e,t)=>{t&&(t.preventDefault(),t.stopPropagation()),o(e),l(!1),c(-1)}),[o]),f=(0,t.useCallback)((e=>{if(i)switch(e.key){case"ArrowDown":e.preventDefault(),c((e=>e<a.length-1?e+1:e));break;case"ArrowUp":e.preventDefault(),c((e=>e>0?e-1:e));break;case"Enter":e.preventDefault(),s>=0&&s<a.length&&g(a[s]);break;case"Escape":e.preventDefault(),l(!1),c(-1)}else"Enter"!==e.key&&" "!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),l(!0))}),[i,s,a,g]);return(0,t.useEffect)((()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&(l(!1),c(-1))};return i&&document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}}),[i]),(0,t.useEffect)((()=>{if(i&&s>=0&&u.current){const e=u.current.children[s];e&&e.scrollIntoView({block:"nearest",behavior:"smooth"})}}),[s,i]),(0,t.useEffect)((()=>{if(i){const t=a.findIndex((t=>t===e));c(t>=0?t:0)}}),[i,e,a]),t.default.createElement("div",{ref:d,className:`custom-dropdown ${n} ${i?"custom-dropdown--open":""}`},t.default.createElement("button",{type:"button",className:"custom-dropdown__trigger",onClick:m,onKeyDown:f,"aria-haspopup":"listbox","aria-expanded":i,"aria-label":p},t.default.createElement("span",{className:"custom-dropdown__value "+(e?"":"custom-dropdown__value--placeholder")},p),t.default.createElement("svg",{className:"custom-dropdown__chevron "+(i?"custom-dropdown__chevron--open":""),width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M2.5 4.5L6 8L9.5 4.5",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))),i&&t.default.createElement("div",{className:"custom-dropdown__options-wrapper"},t.default.createElement("ul",{ref:u,className:"custom-dropdown__options",role:"listbox"},a.map(((a,o)=>{const r=a===e,n=o===s;return t.default.createElement("li",{key:a,className:`custom-dropdown__option ${r?"custom-dropdown__option--selected":""} ${n?"custom-dropdown__option--highlighted":""}`,role:"option","aria-selected":r,onClick:e=>g(a,e),onMouseEnter:()=>c(o)},a,r&&t.default.createElement("svg",{className:"custom-dropdown__check",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M13.3333 4L6 11.3333L2.66667 8",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})))})))))};var Te=d(10),$e={};$e.styleTagTransform=xe(),$e.setAttributes=he(),$e.insert=fe().bind(null,"head"),$e.domAPI=me(),$e.insertStyleElement=_e(),ue()(Te.Z,$e),Te.Z&&Te.Z.locals&&Te.Z.locals;const Pe=({message:e,type:a="success",duration:o=3e3,onClose:r})=>{const{t:n}=s(),[i,l]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null);if((0,t.useEffect)((()=>{if("undefined"!=typeof document){let e=document.getElementById("custom-toast-portal");e||(e=document.createElement("div"),e.id="custom-toast-portal",document.body.appendChild(e)),d(e)}return()=>{if("undefined"!=typeof document){const e=document.getElementById("custom-toast-portal");e&&0===e.children.length&&e.parentNode&&e.parentNode.removeChild(e)}}}),[]),(0,t.useEffect)((()=>{setTimeout((()=>l(!0)),10);const e=setTimeout((()=>{l(!1),setTimeout((()=>{null==r||r()}),300)}),o);return()=>clearTimeout(e)}),[o,r]),!c)return null;const u=t.default.createElement("div",{className:`custom-toast custom-toast--${a} ${i?"custom-toast--visible":""}`},t.default.createElement("div",{className:"custom-toast__icon"},"success"===a&&t.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M16.6667 5L7.50004 14.1667L3.33337 10",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),"error"===a&&t.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M5 5L15 15M15 5L5 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})),"info"===a&&t.default.createElement("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M10 13.3333V10M10 6.66667H10.0083M18.3333 10C18.3333 14.6024 14.6024 18.3333 10 18.3333C5.39765 18.3333 1.66667 14.6024 1.66667 10C1.66667 5.39765 5.39765 1.66667 10 1.66667C14.6024 1.66667 18.3333 5.39765 18.3333 10Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"}))),t.default.createElement("div",{className:"custom-toast__message"},e),t.default.createElement("button",{type:"button",className:"custom-toast__close",onClick:()=>{l(!1),setTimeout((()=>{null==r||r()}),300)},"aria-label":n("toast.close"),title:n("toast.close")},t.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M12 4L4 12M4 4L12 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))));return(0,Ce.createPortal)(u,c)};var De=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};const Re=()=>t.default.createElement("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M21 13V13.8C21 16.7998 21 18.2997 20.2361 19.3511C19.9893 19.6907 19.6907 19.9893 19.3511 20.2361C18.2997 21 16.7998 21 13.8 21H10.2C7.20021 21 5.70032 21 4.64886 20.2361C4.30928 19.9893 4.01065 19.6907 3.76393 19.3511C3 18.2997 3 16.7998 3 13.8V13M12 15V3M12 3L9 6M12 3L15 6",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})),Fe="https://api-test.spacemc.uz",qe=(0,t.memo)((({isOpen:e,onClose:a,polygonData:o,onDataUpdated:r})=>{const{t:n}=s(),[i,l]=(0,t.useState)(null),[c,d]=(0,t.useState)(!1),u=(0,t.useMemo)((()=>[n("modal.fields.result.options.approved"),n("modal.fields.result.options.rejected"),n("modal.fields.result.options.review")]),[n]),p=(0,t.useMemo)((()=>n("modal.fields.year.options.2025")),[n]),m=(0,t.useMemo)((()=>n("modal.fields.result.options.approved")),[n]),g=(0,t.useCallback)((e=>{if(!e)return m;const t=String(e).trim(),a=n("modal.fields.result.options.approved"),o=n("modal.fields.result.options.rejected");return"1"===t?a:"2"===t?o:t===a||t===o||t===n("modal.fields.result.options.review")?t:m}),[n,m]),[f,b]=(0,t.useState)({objectId:"",year:p,area:"",inspector:"",damage:"",fine:"",note:"",result:m}),[h,v]=(0,t.useState)(null),[_,y]=(0,t.useState)(!1),[x,w]=(0,t.useState)(null),[k,z]=(0,t.useState)(!1),[E,j]=(0,t.useState)(null),[C,S]=(0,t.useState)(!1),[N,L]=(0,t.useState)(""),I=(0,t.useRef)(null),M=(0,t.useRef)(!1);(0,t.useEffect)((()=>{o||b((e=>Object.assign(Object.assign({},e),{year:p,result:m})))}),[p,m,o]),(0,t.useEffect)((()=>{e&&o?De(void 0,void 0,void 0,(function*(){var e;let t="";if((null==o?void 0:o.globalid)?t=String(o.globalid).replace(/[{}]/g,""):(null==o?void 0:o.GlobalID)?t=String(o.GlobalID).replace(/[{}]/g,""):(null==o?void 0:o.gid)&&(t=String(o.gid)),t){d(!0);try{try{yield fetch(`${Fe}/api/ecology/cache/clear`,{method:"POST",headers:{accept:"application/json"}})}catch(e){console.warn("Failed to clear cache before GET request:",e)}const a=new URL(`${Fe}/api/ecology/geojson`),r=localStorage.getItem("selectedSoato");if(r&&"all"!==r){const e=r.length;4===e?a.searchParams.append("region",r):7===e?a.searchParams.append("district",r):10===e&&a.searchParams.append("mahalla_id",r)}const n=localStorage.getItem("status");n&&a.searchParams.append("status",n);const i=yield fetch(a.toString(),{method:"GET",headers:{accept:"application/json","Content-Type":"application/json"}});if(!i.ok)throw new Error(`API request failed: ${i.status}`);const s=yield i.json(),c=e=>e.replace(/[{}]/g,"").toUpperCase(),d=c(t),u=null===(e=s.features)||void 0===e?void 0:e.find((e=>{const t=e.properties||{},a=t.globalid||t.GlobalID||(t.gid?String(t.gid):"");return c(String(a))===d}));if(u){const e=u.properties||{},t=Object.assign(Object.assign(Object.assign({},o),{globalid:e.globalid||e.GlobalID||e.gid,maydon:void 0!==e.maydon?e.maydon:o.maydon,sana:e.sana||e.yil||o.sana||o.yil,Inspektor:e.inspektor||e.Inspektor||e.tekshirish||o.Inspektor,inspektor:e.inspektor||e.Inspektor||e.tekshirish||o.inspektor,Jarima_qollanildi:void 0!==e.jarima_qollanildi?String(e.jarima_qollanildi):e.Jarima_qollanildi||o.Jarima_qollanildi,jarima_qollanildi:void 0!==e.jarima_qollanildi?e.jarima_qollanildi:e.Jarima_qollanildi?parseFloat(String(e.Jarima_qollanildi)):o.jarima_qollanildi,Hisoblangan_zarar:void 0!==e.hisoblangan_zarar?String(e.hisoblangan_zarar):e.Hisoblangan_zarar||o.Hisoblangan_zarar,hisoblangan_zarar:void 0!==e.hisoblangan_zarar?e.hisoblangan_zarar:e.Hisoblangan_zarar?parseFloat(String(e.Hisoblangan_zarar)):o.hisoblangan_zarar,Holat_bartaraf_etildi:e.holat_bartaraf_etildi||e.Holat_bartaraf_etildi||o.Holat_bartaraf_etildi,holat_bartaraf_etildi:e.holat_bartaraf_etildi||e.Holat_bartaraf_etildi||o.holat_bartaraf_etildi,buzilish:e.buzilish||o.buzilish,Tekshiruv_natijasi:e.Tekshiruv_natijasi||e.tekshirish||o.Tekshiruv_natijasi}),e);l(t)}else l(o)}catch(e){l(o)}finally{d(!1)}}else l(o)})):l(null)}),[e,o]);const T=(0,t.useRef)(null);(0,t.useEffect)((()=>{const t=i||o;if(e&&t){let e=null;if(void 0!==(null==t?void 0:t.gid)&&null!==(null==t?void 0:t.gid))e=Number(t.gid);else if(null==t?void 0:t.globalid){const a=String(t.globalid).replace(/[{}]/g,"").match(/\d+/);a&&(e=parseInt(a[0],10))}const a=e!==T.current,o=null===T.current;if((a||o)&&(!M.current||a)){a&&(M.current=!1),T.current=e;let o="";if(null==t?void 0:t.globalid){const e=String(t.globalid);o=e.startsWith("{")&&e.endsWith("}")?e:`{${e}}`}else if(null==t?void 0:t.GlobalID){const e=String(t.GlobalID);o=e.startsWith("{")&&e.endsWith("}")?e:`{${e}}`}else(null==t?void 0:t.gid)&&(o=`{${t.gid}}`);const r=(null==t?void 0:t.sana)||(null==t?void 0:t.yil)||"",n=void 0!==(null==t?void 0:t.maydon)&&null!==(null==t?void 0:t.maydon)?String(t.maydon):"",i=(null==t?void 0:t.Tekshiruv_natijasi)||(null==t?void 0:t.tekshirish)||"",l=g(i);b((e=>Object.assign(Object.assign({},e),{objectId:o||"",year:r||"",area:n||"",inspector:(null==t?void 0:t.inspektor)||(null==t?void 0:t.Inspektor)||(null==t?void 0:t.tekshirish)||"",damage:void 0!==(null==t?void 0:t.hisoblangan_zarar)&&null!==(null==t?void 0:t.hisoblangan_zarar)?String(t.hisoblangan_zarar):(null==t?void 0:t.Hisoblangan_zarar)||"",fine:void 0!==(null==t?void 0:t.jarima_qollanildi)&&null!==(null==t?void 0:t.jarima_qollanildi)?String(t.jarima_qollanildi):(null==t?void 0:t.Jarima_qollanildi)||"",note:(null==t?void 0:t.buzilish)||"",result:l})))}}else e||(T.current=null,M.current=!1)}),[e,i,o]),(0,t.useEffect)((()=>{e||(v(null),w(null),y(!1),j(null),z(!1),M.current=!1,I.current&&(I.current.value=""))}),[e]);const $=(0,t.useCallback)(((e,t)=>{"result"===e&&(M.current=!0),b((a=>Object.assign(Object.assign({},a),{[e]:t})))}),[]),P=(0,t.useCallback)((e=>{var t;const a="."+(null===(t=e.name.split(".").pop())||void 0===t?void 0:t.toLowerCase()),o=e.type.toLowerCase(),r=[".mp4",".avi",".mov",".webm"],i=["image/jpeg","image/jpg","image/png","image/gif","image/bmp","image/webp","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/pdf","video/mp4","video/x-msvideo","video/quicktime","video/webm"];if(![".jpg",".jpeg",".png",".gif",".bmp",".webp",".doc",".docx",".pdf",...r].includes(a))return n("modal.fields.fileUpload.errors.invalidType");if(o&&"application/octet-stream"!==o&&""!==o&&!i.some((e=>o===e||o.startsWith("image/")&&e.startsWith("image/")||o.startsWith("video/")&&e.startsWith("video/")||o.startsWith("application/")&&e.startsWith("application/"))))return n("modal.fields.fileUpload.errors.invalidType");let l;if(l=r.includes(a)?26214400:15728640,e.size>l){const e=Math.round(l/1048576);return n("modal.fields.fileUpload.errors.tooLarge").replace("{maxSize}",e.toString())}return null}),[n]),D=(0,t.useCallback)((e=>{if(!e)return v(null),void w(null);w(null);const t=P(e);if(t)return w(t),v(null),void(I.current&&(I.current.value=""));v(e)}),[P]),R=(0,t.useCallback)((e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];a?D(a):(v(null),w(null))}),[D]),F=(0,t.useCallback)((e=>{var t;e.preventDefault(),e.stopPropagation(),y(!1);const a=null===(t=e.dataTransfer.files)||void 0===t?void 0:t[0];if(a&&(D(a),I.current)){const e=new DataTransfer;e.items.add(a),I.current.files=e.files}}),[D]),q=(0,t.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),y(!0)}),[]),G=(0,t.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),y(!1)}),[]),A=(0,t.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),I.current&&(I.current.value="",setTimeout((()=>{I.current&&I.current.click()}),0))}),[]),O=(0,t.useCallback)((e=>{e.stopPropagation(),v(null),w(null),I.current&&(I.current.value="")}),[]),U=(0,t.useCallback)((e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]}),[]),W=(0,t.useCallback)((e=>{if(!e)return null;const t=n("modal.fields.result.options.approved"),a=n("modal.fields.result.options.rejected");return n("modal.fields.result.options.review"),e===t?"1":e===a?"2":null}),[n]),B=(0,t.useCallback)((()=>De(void 0,void 0,void 0,(function*(){const e=i||o;if(!e)return void j("Ð”Ð°Ð½Ð½Ñ‹Ðµ Ð¿Ð¾Ð»Ð¸Ð³Ð¾Ð½Ð° Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹");let t=null;if(void 0!==(null==e?void 0:e.gid)&&null!==(null==e?void 0:e.gid))t=Number(e.gid);else if(null==e?void 0:e.globalid){const a=String(e.globalid).replace(/[{}]/g,""),o=a.match(/\d+/);t=o?parseInt(o[0],10):a}else if(null==e?void 0:e.GlobalID){const a=String(e.GlobalID).replace(/[{}]/g,""),o=a.match(/\d+/);t=o?parseInt(o[0],10):a}if(!t||"number"==typeof t&&isNaN(t))j("ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»Ð¸Ñ‚ÑŒ ID Ð·Ð°Ð¿Ð¸ÑÐ¸ (gid)");else{z(!0),j(null);try{const e=new FormData;if(f.inspector&&e.append("inspektor",f.inspector),f.damage){const t=parseFloat(f.damage);isNaN(t)||e.append("hisoblangan_zarar",t.toString())}if(f.fine){const t=parseFloat(f.fine);isNaN(t)||e.append("jarima_qollanildi",t.toString())}if(f.note&&e.append("izoh",f.note),f.result){const t=W(f.result);null!==t&&e.append("tekshirish",t)}if(f.year&&e.append("sana",f.year),f.area){const t=parseFloat(f.area);isNaN(t)||e.append("maydon",t.toString())}if(h){const t=P(h);if(t)return j(t),void z(!1);e.append("file",h,h.name)}const t=yield fetch(`${Fe}/api/ecology/${null==o?void 0:o.globalid}`,{method:"PUT",body:e,headers:{accept:"application/json"}});if(!t.ok){let e=`ÐžÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ð¸ Ð´Ð°Ð½Ð½Ñ‹Ñ…: ${t.status} ${t.statusText}`;try{const a=yield t.json();a.detail?(e=a.detail,(a.detail.toLowerCase().includes("file type")||a.detail.toLowerCase().includes("invalid file"))&&(e="ÐÐµÐ´Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼Ñ‹Ð¹ Ñ‚Ð¸Ð¿ Ñ„Ð°Ð¹Ð»Ð°. Ð Ð°Ð·Ñ€ÐµÑˆÐµÐ½Ñ‹: Ð¸Ð·Ð¾Ð±Ñ€Ð°Ð¶ÐµÐ½Ð¸Ñ (JPG, PNG, GIF, BMP, WEBP), Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ñ‹ (DOC, DOCX, PDF), Ð²Ð¸Ð´ÐµÐ¾ (MP4, AVI, MOV, WEBM).")):e=JSON.stringify(a)}catch(a){const o=yield t.text();o&&(e=o)}throw new Error(e)}try{yield fetch(`${Fe}/api/ecology/cache/clear`,{method:"POST",headers:{accept:"application/json"}})}catch(e){console.warn("Failed to clear cache:",e)}try{localStorage.setItem("status","tekshirilgan")}catch(e){console.warn("Failed to set status in localStorage:",e)}try{window.dispatchEvent(new CustomEvent("status-statistics-refresh")),console.log("Dispatched status-statistics-refresh event")}catch(e){console.warn("Failed to dispatch status-statistics-refresh event:",e)}window.location.reload()}catch(e){const t=e instanceof Error?e.message:"ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°Ñ Ð¾ÑˆÐ¸Ð±ÐºÐ° Ð¿Ñ€Ð¸ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²ÐºÐµ Ð´Ð°Ð½Ð½Ñ‹Ñ…";j(t),console.error("Error submitting form:",e)}finally{z(!1)}}}))),[f,h,i,o,a,W,P]),[H,Z]=(0,t.useState)(null);(0,t.useEffect)((()=>{if("undefined"!=typeof document){let e=document.getElementById("custom-map-modal-portal");e||(e=document.createElement("div"),e.id="custom-map-modal-portal",document.body.appendChild(e)),Z(e)}return()=>{if("undefined"!=typeof document){const e=document.getElementById("custom-map-modal-portal");e&&e.parentNode&&e.parentNode.removeChild(e)}}}),[]);const Y=e&&H?t.default.createElement("div",{id:"custom-map-modal",className:"custom-modal-overlay",role:"dialog","aria-modal":"true"},t.default.createElement("div",{className:"custom-modal"},t.default.createElement("div",{className:"custom-modal__header"},t.default.createElement("div",{className:"custom-modal__title"},n("modal.title")),t.default.createElement("button",{type:"button",className:"custom-modal__close","aria-label":n("modal.close"),onClick:a},"Ã—")),t.default.createElement("div",{className:"custom-modal__body"},t.default.createElement("div",{className:"custom-modal__row custom-modal__row--full"},t.default.createElement("label",{className:"custom-modal__field"},t.default.createElement("span",{className:"custom-modal__label"},n("modal.fields.objectId.label")),t.default.createElement("input",{type:"text",className:"custom-modal__input custom-modal__input--readonly",value:f.objectId,readOnly:!0,disabled:!0}))),t.default.createElement("div",{className:"custom-modal__row custom-modal__row--half"},t.default.createElement("label",{className:"custom-modal__field"},t.default.createElement("span",{className:"custom-modal__label"},n("modal.fields.year.label")),t.default.createElement("input",{type:"text",className:"custom-modal__input custom-modal__input--readonly",value:f.year,readOnly:!0,disabled:!0})),t.default.createElement("label",{className:"custom-modal__field"},t.default.createElement("span",{className:"custom-modal__label"},n("modal.fields.area.label")),t.default.createElement("input",{type:"text",className:"custom-modal__input custom-modal__input--readonly",placeholder:n("modal.fields.area.placeholder"),value:f.area,readOnly:!0,disabled:!0}))),t.default.createElement("div",{className:"custom-modal__row custom-modal__row--full"},t.default.createElement("label",{className:"custom-modal__field"},t.default.createElement("span",{className:"custom-modal__label"},n("modal.fields.inspector.label")),t.default.createElement("input",{type:"text",className:"custom-modal__input",placeholder:n("modal.fields.inspector.placeholder"),value:f.inspector,onChange:e=>$("inspector",e.target.value)}))),t.default.createElement("div",{className:"custom-modal__row custom-modal__row--half"},t.default.createElement("label",{className:"custom-modal__field"},t.default.createElement("span",{className:"custom-modal__label"},n("modal.fields.damage.label")),t.default.createElement("input",{type:"text",className:"custom-modal__input",placeholder:n("modal.fields.damage.placeholder"),value:f.damage,onChange:e=>$("damage",e.target.value)})),t.default.createElement("label",{className:"custom-modal__field"},t.default.createElement("span",{className:"custom-modal__label"},n("modal.fields.fine.label")),t.default.createElement("input",{type:"text",className:"custom-modal__input",placeholder:n("modal.fields.fine.placeholder"),value:f.fine,onChange:e=>$("fine",e.target.value)}))),t.default.createElement("div",{className:"custom-modal__row custom-modal__row--izoh"},t.default.createElement("label",{className:"custom-modal__field"},t.default.createElement("span",{className:"custom-modal__label"},n("modal.fields.note.label")),t.default.createElement("input",{type:"text",className:"custom-modal__input",placeholder:n("modal.fields.note.placeholder"),value:f.note,onChange:e=>$("note",e.target.value)})),t.default.createElement("label",{className:"custom-modal__field"},t.default.createElement("span",{className:"custom-modal__label"},n("modal.fields.result.label")),t.default.createElement(Me,{value:f.result,options:u,onChange:e=>$("result",e)}))),t.default.createElement("div",{className:"custom-modal__row custom-modal__row--full"},t.default.createElement("label",{className:"custom-modal__field"},t.default.createElement("span",{className:"custom-modal__label"},n("modal.fields.fileUpload.label")),t.default.createElement("input",{ref:I,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/bmp,image/webp,.doc,.docx,.pdf,video/mp4,video/quicktime,video/webm,.mp4,.avi,.mov,.webm",onChange:R,className:"custom-modal__file-input",style:{display:"none"},multiple:!1}),t.default.createElement("div",{className:`custom-modal__upload-zone ${_?"custom-modal__upload-zone--dragging":""} ${h?"custom-modal__upload-zone--has-file":""}`,onClick:e=>{e.target.closest(".custom-modal__file-remove")||A(e)},onDrop:F,onDragOver:q,onDragLeave:G},h?t.default.createElement(t.default.Fragment,null,t.default.createElement("div",{className:"custom-modal__file-info"},t.default.createElement("svg",{className:"custom-modal__file-icon",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M14 2H6C5.46957 2 4.96086 2.21071 4.58579 2.58579C4.21071 2.96086 4 3.46957 4 4V20C4 20.5304 4.21071 21.0391 4.58579 21.4142C4.96086 21.7893 5.46957 22 6 22H18C18.5304 22 19.0391 21.7893 19.4142 21.4142C19.7893 21.0391 20 20.5304 20 20V8L14 2Z",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),t.default.createElement("path",{d:"M14 2V8H20",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})),t.default.createElement("div",{className:"custom-modal__file-details"},t.default.createElement("div",{className:"custom-modal__file-name"},h.name),t.default.createElement("div",{className:"custom-modal__file-size"},U(h.size))),t.default.createElement("button",{type:"button",className:"custom-modal__file-remove",onClick:O,"aria-label":n("modal.fields.fileUpload.remove")},t.default.createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t.default.createElement("path",{d:"M12 4L4 12M4 4L12 12",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}))))):t.default.createElement(t.default.Fragment,null,t.default.createElement(Re,null),t.default.createElement("div",{className:"custom-modal__upload-text"},n("modal.fields.fileUpload.text")," ",t.default.createElement("span",null,n("modal.fields.fileUpload.textSpan"))),t.default.createElement("div",{className:"custom-modal__upload-hint"},n("modal.fields.fileUpload.hint")))),x&&t.default.createElement("div",{className:"custom-modal__upload-error"},x)))),E&&t.default.createElement("div",{className:"custom-modal__submit-error"},E),t.default.createElement("div",{className:"custom-modal__footer"},t.default.createElement("button",{type:"button",className:"custom-modal__cancel",onClick:a,disabled:k},n("modal.buttons.cancel")),t.default.createElement("button",{type:"button",className:"custom-modal__submit",onClick:B,disabled:k},k?"ÐžÑ‚Ð¿Ñ€Ð°Ð²ÐºÐ°...":n("modal.buttons.submit"))))):null;return t.default.createElement(t.default.Fragment,null,Y&&H&&(0,Ce.createPortal)(Y,H),C&&t.default.createElement(Pe,{message:N,type:"success",duration:3e3,onClose:()=>{S(!1),L("")}}))}));var Ge=function(e,t,a,o){return new(a||(a=Promise))((function(r,n){function i(e){try{s(o.next(e))}catch(e){n(e)}}function l(e){try{s(o.throw(e))}catch(e){n(e)}}function s(e){var t;e.done?r(e.value):(t=e.value,t instanceof a?t:new a((function(e){e(t)}))).then(i,l)}s((o=o.apply(e,t||[])).next())}))};const Ae=(0,t.memo)((({isProcessingRegion:t=!1})=>{const{t:a}=s();return(0,e.jsx)("div",{className:"map-loader"},(0,e.jsx)("div",{className:"map-loader__background"},(0,e.jsx)("div",{className:"map-loader__grid"}),(0,e.jsx)("div",{className:"map-loader__gradient"})),(0,e.jsx)("div",{className:"map-loader__content"},(0,e.jsx)("div",{className:"map-loader__globe-container"},(0,e.jsx)("div",{className:"map-loader__globe"},(0,e.jsx)("div",{className:"map-loader__globe-inner"},(0,e.jsx)("div",{className:"map-loader__globe-ring map-loader__globe-ring--1"}),(0,e.jsx)("div",{className:"map-loader__globe-ring map-loader__globe-ring--2"}),(0,e.jsx)("div",{className:"map-loader__globe-ring map-loader__globe-ring--3"}),(0,e.jsx)("div",{className:"map-loader__globe-core"},(0,e.jsx)("div",{className:"map-loader__globe-core-inner"}))),(0,e.jsx)("div",{className:"map-loader__pulse map-loader__pulse--1"}),(0,e.jsx)("div",{className:"map-loader__pulse map-loader__pulse--2"}),(0,e.jsx)("div",{className:"map-loader__pulse map-loader__pulse--3"})),(0,e.jsx)("div",{className:"map-loader__particles"},[...Array(12)].map(((t,a)=>(0,e.jsx)("div",{key:a,className:"map-loader__particle",style:{"--i":a}}))))),(0,e.jsx)("div",{className:"map-loader__text"},(0,e.jsx)("span",{className:"map-loader__text-main"},t?"ÐžÐ±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ° Ð´Ð°Ð½Ð½Ñ‹Ñ… Ñ€ÐµÐ³Ð¸Ð¾Ð½Ð°...":a("loader.loading")),(0,e.jsx)("span",{className:"map-loader__dots"},(0,e.jsx)("span",{className:"map-loader__dot"},"."),(0,e.jsx)("span",{className:"map-loader__dot"},"."),(0,e.jsx)("span",{className:"map-loader__dot"},"."))),(0,e.jsx)("div",{className:"map-loader__progress"},(0,e.jsx)("div",{className:"map-loader__progress-bar"}))))})),Oe=(0,t.memo)((({assetBasePath:o})=>{const r=(0,t.useRef)(null),[n,i]=(0,t.useState)(!1),[l,s]=(0,t.useState)(!1),[c,d]=(0,t.useState)(null),[u,p]=(0,t.useState)(null),[m,f]=(0,t.useState)(0),[b,h]=(0,t.useState)((()=>{try{return localStorage.getItem("custom-map-widget-basemap")||"hybrid"}catch(e){return"hybrid"}})),{geoJSONData:v,districtGeoJSON:y,selectedRegion:x,selectedDistrict:w,selectionRevision:k}=(e=>{const{filters:a,filtersRevision:o}=z(),{region:r,district:n}=L(a.selectedSoato),[i,l]=(0,t.useState)(j),[s,c]=(0,t.useState)(r),[d,u]=(0,t.useState)(n),[p,m]=(0,t.useState)(C&&n?C:null),[g,f]=(0,t.useState)(0);(0,t.useRef)(a.selectedSoato),(0,t.useEffect)((()=>{i||S||I(e).then((e=>{e&&l(e)}))}),[a.selectedSoato,e]),(0,t.useEffect)((()=>{d&&!p&&M(e).then((e=>{e&&m(e)}))}),[d,p,e]),(0,t.useEffect)((()=>{const{region:t,district:o}=L(a.selectedSoato);i||S||I(e).then((e=>{e&&l(e)})),t!==s&&(c(t),f((e=>e+1))),o!==d&&(u(o),f((e=>e+1)))}),[a.selectedSoato,o,i,s,d,e]),(0,t.useEffect)((()=>{const e=e=>{const t=e.detail,a=t?String(t):"all";c(a)},t=e=>{const t=e.detail;u(t||null)};return window.addEventListener("custom-map-region-change",e),window.addEventListener("custom-map-district-change",t),window.customMapSelectRegion=e=>{const t=e?String(e):"all";window.dispatchEvent(new CustomEvent("custom-map-region-change",{detail:t}))},window.customMapSelectDistrict=e=>{window.dispatchEvent(new CustomEvent("custom-map-district-change",{detail:e}))},window.customMapRemoveSoato=()=>{localStorage.removeItem("selectedSoato"),window.dispatchEvent(new CustomEvent("custom-map-soato-removed"))},window.customMapRemoveDistrict=()=>{localStorage.removeItem("selectedDistrict"),window.dispatchEvent(new CustomEvent("custom-map-district-removed"))},()=>{window.removeEventListener("custom-map-region-change",e),window.removeEventListener("custom-map-district-change",t)}}),[]);const b=(0,t.useCallback)((()=>E(void 0,void 0,void 0,(function*(){if(i)return;const t=yield I(e);t&&l(t)}))),[e,i]),h=(0,t.useCallback)((()=>E(void 0,void 0,void 0,(function*(){if(d&&!p){const t=yield M(e);t&&m(t)}}))),[e,p,d]);return(0,t.useEffect)((()=>{b()}),[b]),(0,t.useEffect)((()=>{h()}),[h]),{geoJSONData:i,selectedRegion:s,setSelectedRegion:c,districtGeoJSON:p,selectedDistrict:d,setSelectedDistrict:u,selectionRevision:g}})(o),{filters:N,filtersRevision:T}=z(),$=(0,t.useCallback)(((e,t)=>{d(e),p(t),i(!0)}),[]),P=(0,t.useCallback)((()=>{i(!1),p(null)}),[]),D=(0,t.useCallback)((()=>{s(!0),i(!1)}),[]),R=(0,t.useCallback)((()=>{s(!1)}),[]),{handleZoomIn:F,handleZoomOut:q,isMapReady:G,isProcessingRegion:A,changeBasemap:O,toggleImageServiceLayer:U,refreshMap:W}=ce({mapRef:r,geoJSONData:v,districtGeoJSON:y,selectedRegion:x,selectedDistrict:w,selectionRevision:k,filters:N,filtersRevision:T,onShowPopup:$}),B=(0,t.useCallback)((()=>Ge(void 0,void 0,void 0,(function*(){var e;if(!c)return;const t="https://api-test.spacemc.uz";let a="";if((null==c?void 0:c.globalid)?a=String(c.globalid).replace(/[{}]/g,""):(null==c?void 0:c.GlobalID)?a=String(c.GlobalID).replace(/[{}]/g,""):(null==c?void 0:c.gid)&&(a=String(c.gid)),a)try{try{yield fetch(`${t}/api/ecology/cache/clear`,{method:"POST",headers:{accept:"application/json"}})}catch(e){console.warn("Failed to clear cache during refresh:",e)}const o=new URL(`${t}/api/ecology/geojson`),r=localStorage.getItem("selectedSoato");if(r&&"all"!==r){const e=r.length;4===e?o.searchParams.append("region",r):7===e?o.searchParams.append("district",r):10===e&&o.searchParams.append("mahalla_id",r)}const n=localStorage.getItem("status");n&&o.searchParams.append("status",n);const i=yield fetch(o.toString(),{method:"GET",headers:{accept:"application/json","Content-Type":"application/json"}});if(!i.ok)throw new Error(`API request failed: ${i.status}`);const l=yield i.json(),s=e=>e.replace(/[{}]/g,"").toUpperCase(),u=s(a),p=null===(e=l.features)||void 0===e?void 0:e.find((e=>{const t=e.properties||{},a=t.globalid||t.GlobalID||(t.gid?String(t.gid):"");return s(String(a))===u}));if(p){const e=p.properties||{},t=localStorage.getItem("customLocal")||"ru",a="uz-Cyrl"===t?"uz-Cyrl":"uz-Latn"===t?"uz-Latn":"ru",o=e.region?String(e.region):null,r=o?oe.find((e=>e.region_soato===o)):null,n=Object.assign({viloyat:r?r[a]:e.viloyat||c.viloyat||"",tuman:e.tuman||c.tuman||"",mfy:e.mfy||c.mfy||"",maydon:void 0!==e.maydon?e.maydon:c.maydon,tur:void 0!==e.tur&&null!==e.tur?String(e.tur):void 0!==c.tur&&null!==c.tur?String(c.tur):"",latitude:e.latitude?parseFloat(String(e.latitude)):c.latitude,longitude:e.longitude?parseFloat(String(e.longitude)):c.longitude,yil:e.sana||e.yil||c.yil||"","Yer toifa":e.yer_toifa||e["Yer toifa"]||c["Yer toifa"]||"",natija:e.natija||c.natija||"",tavsif:e.tavsif||e.natija||c.tavsif||c.natija||"",GlobalID:e.globalid||e.GlobalID||c.GlobalID||"",Inspektor:e.inspektor||e.Inspektor||e.tekshirish||c.Inspektor||"",inspektor:e.inspektor||e.Inspektor||e.tekshirish||c.inspektor||"",Jarima_qollanildi:void 0!==e.jarima_qollanildi?String(e.jarima_qollanildi):e.Jarima_qollanildi||c.Jarima_qollanildi||"",jarima_qollanildi:void 0!==e.jarima_qollanildi?e.jarima_qollanildi:e.Jarima_qollanildi?parseFloat(String(e.Jarima_qollanildi)):c.jarima_qollanildi,Hisoblangan_zarar:void 0!==e.hisoblangan_zarar?String(e.hisoblangan_zarar):e.Hisoblangan_zarar||c.Hisoblangan_zarar||"",hisoblangan_zarar:void 0!==e.hisoblangan_zarar?e.hisoblangan_zarar:e.Hisoblangan_zarar?parseFloat(String(e.Hisoblangan_zarar)):c.hisoblangan_zarar,Holat_bartaraf_etildi:e.holat_bartaraf_etildi||e.Holat_bartaraf_etildi||c.Holat_bartaraf_etildi||"",holat_bartaraf_etildi:e.holat_bartaraf_etildi||e.Holat_bartaraf_etildi||c.holat_bartaraf_etildi||"",buzilish:e.buzilish||c.buzilish||"",Tekshiruv_natijasi:e.Tekshiruv_natijasi||e.tekshirish||c.Tekshiruv_natijasi||"",tekshirish:void 0!==e.tekshirish?e.tekshirish:c.tekshirish},e);d(n),f((e=>e+1));try{yield W()}catch(e){console.warn("Failed to refresh map:",e)}}}catch(e){console.error("Failed to refresh polygon data:",e)}}))),[c,n,u,W]),H=(0,t.useRef)(!1);(0,t.useEffect)((()=>{G&&b&&!H.current&&(O(b),H.current=!0)}),[G,b,O]);const[Z,Y]=(0,t.useState)(!1),J=(0,t.useRef)(Date.now());(0,t.useEffect)((()=>{const e=Date.now()-J.current,t=Math.max(0,1500-e),a=setTimeout((()=>{Y(!0)}),t);return()=>clearTimeout(a)}),[]);const V=!v||!G||!Z||A;return(0,e.jsx)("div",{className:"geo-info"},V&&(0,e.jsx)(Ae,{isProcessingRegion:A}),(0,e.jsx)("div",{ref:r,className:"map-container",style:{opacity:V?0:1,transition:"opacity 0.5s ease"}},(0,e.jsx)(je,{key:`popup-${m}`,isOpen:n,onClose:P,polygonData:c,position:u,uploadedFiles:[],photos:[],onEdit:D})),!V&&(0,e.jsx)(t.default.Fragment,null,(0,e.jsx)(a,{onZoomIn:F,onZoomOut:q}),(0,e.jsx)(g,{onChangeBasemap:e=>Ge(void 0,void 0,void 0,(function*(){yield O(e),h(e);try{localStorage.setItem("custom-map-widget-basemap",e)}catch(e){}})),currentBasemap:b,onToggleImageService:U}),(0,e.jsx)(_,null)),(0,e.jsx)(qe,{key:`modal-${m}`,isOpen:l,onClose:R,polygonData:c,onDataUpdated:B}))})),Ue={"#19253b":{primary:"#4eccf2",light:"#91dff6",medium:"#4eccf2",dark:"#2ec3ee"},"#0b6baa":{primary:"#0ea5e9",light:"#38bdf8",medium:"#0ea5e9",dark:"#0284c7"},"#63289e":{primary:"#a855f7",light:"#c084fc",medium:"#a855f7",dark:"#9333ea"},"#00888d":{primary:"#10b981",light:"#34d399",medium:"#10b981",dark:"#059669"},"#793b05":{primary:"#f59e0b",light:"#fbbf24",medium:"#f59e0b",dark:"#d97706"},"#a0202c":{primary:"#ef4444",light:"#f87171",medium:"#ef4444",dark:"#dc2626"},"#1e3a8a":{primary:"#3b82f6",light:"#60a5fa",medium:"#3b82f6",dark:"#2563eb"},"#7c3aed":{primary:"#a78bfa",light:"#c4b5fd",medium:"#a78bfa",dark:"#8b5cf6"}},We={primary:"#4eccf2",light:"#91dff6",medium:"#4eccf2",dark:"#2ec3ee"},Be=()=>{if("undefined"==typeof window)return We;try{const e=localStorage.getItem("selectedThemeColor");if(e&&Ue[e])return Ue[e]}catch(e){console.error("Error getting theme color:",e)}return We};var He=d(2265),Ze={};Ze.styleTagTransform=xe(),Ze.setAttributes=he(),Ze.insert=fe().bind(null,"head"),Ze.domAPI=me(),Ze.insertStyleElement=_e(),ue()(He.Z,Ze),He.Z&&He.Z.locals&&He.Z.locals;const Ye=a=>{const{id:o,context:r}=a,[n,i]=(0,t.useState)(Be());(0,t.useEffect)((()=>{const e=()=>{try{const e=Be();i(e)}catch(e){}};e();const t=()=>e();window.addEventListener("theme-color-changed",t),window.addEventListener("storage",(t=>{"selectedThemeColor"!==t.key&&null!==t.key||e()}));const a=setInterval(e,2e3);return()=>{window.removeEventListener("theme-color-changed",t),clearInterval(a)}}),[]);const{r:l,g:s,b:c,rLight:d,gLight:u,bLight:p,rMedium:m,gMedium:g,bMedium:f}=(0,t.useMemo)((()=>{const e=n.primary.replace("#",""),t=n.light.replace("#",""),a=n.medium.replace("#","");return{r:parseInt(e.substr(0,2),16),g:parseInt(e.substr(2,2),16),b:parseInt(e.substr(4,2),16),rLight:parseInt(t.substr(0,2),16),gLight:parseInt(t.substr(2,2),16),bLight:parseInt(t.substr(4,2),16),rMedium:parseInt(a.substr(0,2),16),gMedium:parseInt(a.substr(2,2),16),bMedium:parseInt(a.substr(4,2),16)}}),[n.primary,n.light,n.medium]);return(0,e.jsx)("div",{className:"custom-map-widget","data-widget-id":o,style:{"--border-glow-start":`rgba(${l}, ${s}, ${c}, 0.1)`,"--border-glow-end":`rgba(${l}, ${s}, ${c}, 0.35)`,"--theme-primary-rgba":`rgba(${l}, ${s}, ${c}, 0.6)`,"--theme-primary-rgba-hover":`rgba(${l}, ${s}, ${c}, 0.8)`,"--loader-primary":n.primary,"--loader-primary-rgba-01":`rgba(${l}, ${s}, ${c}, 0.1)`,"--loader-primary-rgba-015":`rgba(${l}, ${s}, ${c}, 0.15)`,"--loader-primary-rgba-02":`rgba(${l}, ${s}, ${c}, 0.2)`,"--loader-primary-rgba-03":`rgba(${l}, ${s}, ${c}, 0.3)`,"--loader-primary-rgba-04":`rgba(${l}, ${s}, ${c}, 0.4)`,"--loader-primary-rgba-06":`rgba(${l}, ${s}, ${c}, 0.6)`,"--loader-primary-rgba-08":`rgba(${l}, ${s}, ${c}, 0.8)`,"--loader-light":n.light,"--loader-light-rgba-02":`rgba(${d}, ${u}, ${p}, 0.2)`,"--loader-light-rgba-03":`rgba(${d}, ${u}, ${p}, 0.3)`,"--loader-medium":n.medium,"--loader-medium-rgba-04":`rgba(${m}, ${g}, ${f}, 0.4)`}},(0,e.jsx)(Oe,{assetBasePath:null==r?void 0:r.folderUrl}))};function Je(e){d.p=e}})(),u})())}}}));